(()=>{var e={4993:(e,t,r)=>{"use strict";const s=r(5317),n=r(2014),o=r(3436);function i(e,t,r){const i=n(e,t,r),a=s.spawn(i.command,i.args,i.options);return o.hookChildProcess(a,i),a}e.exports=i,e.exports.spawn=i,e.exports.sync=function(e,t,r){const i=n(e,t,r),a=s.spawnSync(i.command,i.args,i.options);return a.error=a.error||o.verifyENOENTSync(a.status,i),a},e.exports._parse=n,e.exports._enoent=o},3436:e=>{"use strict";const t="win32"===process.platform;function r(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function s(e,s){return t&&1===e&&!s.file?r(s.original,"spawn"):null}e.exports={hookChildProcess:function(e,r){if(!t)return;const n=e.emit;e.emit=function(t,o){if("exit"===t){const t=s(o,r);if(t)return n.call(e,"error",t)}return n.apply(e,arguments)}},verifyENOENT:s,verifyENOENTSync:function(e,s){return t&&1===e&&!s.file?r(s.original,"spawnSync"):null},notFoundError:r}},2014:(e,t,r)=>{"use strict";const s=r(6928),n=r(9045),o=r(4483),i=r(9182),a="win32"===process.platform,c=/\.(?:com|exe)$/i,h=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;e.exports=function(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null);const l={command:e,args:t=t?t.slice(0):[],options:r=Object.assign({},r),file:void 0,original:{command:e,args:t}};return r.shell?l:function(e){if(!a)return e;const t=function(e){e.file=n(e);const t=e.file&&i(e.file);return t?(e.args.unshift(e.file),e.command=t,n(e)):e.file}(e),r=!c.test(t);if(e.options.forceShell||r){const r=h.test(t);e.command=s.normalize(e.command),e.command=o.command(e.command),e.args=e.args.map((e=>o.argument(e,r)));const n=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${n}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}(l)}},4483:e=>{"use strict";const t=/([()\][%!^"`<>&|;, *?])/g;e.exports.command=function(e){return e.replace(t,"^$1")},e.exports.argument=function(e,r){return e=(e=`"${e=(e=(e=`${e}`).replace(/(?=(\\+?)?)\1"/g,'$1$1\\"')).replace(/(?=(\\+?)?)\1$/,"$1$1")}"`).replace(t,"^$1"),r&&(e=e.replace(t,"^$1")),e}},9182:(e,t,r)=>{"use strict";const s=r(9896),n=r(1395);e.exports=function(e){const t=Buffer.alloc(150);let r;try{r=s.openSync(e,"r"),s.readSync(r,t,0,150,0),s.closeSync(r)}catch(e){}return n(t.toString())}},9045:(e,t,r)=>{"use strict";const s=r(6928),n=r(6911),o=r(9376);function i(e,t){const r=e.options.env||process.env,i=process.cwd(),a=null!=e.options.cwd,c=a&&void 0!==process.chdir&&!process.chdir.disabled;if(c)try{process.chdir(e.options.cwd)}catch(e){}let h;try{h=n.sync(e.command,{path:r[o({env:r})],pathExt:t?s.delimiter:void 0})}catch(e){}finally{c&&process.chdir(i)}return h&&(h=s.resolve(a?e.options.cwd:"",h)),h}e.exports=function(e){return i(e)||i(e,!0)}},602:(e,t,r)=>{"use strict";const{Transform:s,PassThrough:n}=r(2203),o=r(3106),i=r(7157);e.exports=e=>{const t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t))return e;const r="br"===t;if(r&&"function"!=typeof o.createBrotliDecompress)return e.destroy(new Error("Brotli is not supported on Node.js < 12")),e;let a=!0;const c=new s({transform(e,t,r){a=!1,r(null,e)},flush(e){e()}}),h=new n({autoDestroy:!1,destroy(t,r){e.destroy(),r(t)}}),l=r?o.createBrotliDecompress():o.createUnzip();return l.once("error",(t=>{!a||e.readable?h.destroy(t):h.end()})),i(e,h),e.pipe(c).pipe(l).pipe(h),h}},7157:e=>{"use strict";const t=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];e.exports=(e,r)=>{if(r._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const s=new Set(Object.keys(e).concat(t)),n={};for(const t of s)t in r||(n[t]={get(){const r=e[t];return"function"==typeof r?r.bind(e):r},set(r){e[t]=r},enumerable:!0,configurable:!1});return Object.defineProperties(r,n),e.once("aborted",(()=>{r.destroy(),r.emit("aborted")})),e.once("close",(()=>{e.complete&&r.readable?r.once("end",(()=>{r.emit("close")})):r.emit("close")})),r}},687:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=(e,t)=>{let r;r="function"==typeof t?{connect:t}:t;const s="function"==typeof r.connect,n="function"==typeof r.secureConnect,o="function"==typeof r.close,i=()=>{s&&r.connect(),function(e){return e.encrypted}(e)&&n&&(e.authorized?r.secureConnect():e.authorizationError||e.once("secureConnect",r.secureConnect)),o&&e.once("close",r.close)};e.writable&&!e.connecting?i():e.connecting?e.once("connect",i):e.destroyed&&o&&r.close(e._hadError)};t.default=r,e.exports=r,e.exports.default=r},2779:(e,t,r)=>{"use strict";const s=r(6928),n=r(5317),o=r(4993),i=r(2993),a=r(4458),c=r(6034),h=r(3697),l=r(2854),{spawnedKill:d,spawnedCancel:u,setupTimeout:p,validateTimeout:f,setExitHandler:m}=r(4983),{handleInput:y,getSpawnedResult:g,makeAllStream:b,validateInputSync:_}=r(2463),{mergePromise:w,getSpawnedPromise:v}=r(8698),{joinCommand:S,parseCommand:x,getEscapedCommand:E}=r(1882),C=(e,t,r={})=>{const n=o._parse(e,t,r);return e=n.command,t=n.args,(r={maxBuffer:1e8,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:(r=n.options).cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r}).env=(({env:e,extendEnv:t,preferLocal:r,localDir:s,execPath:n})=>{const o=t?{...process.env,...e}:e;return r?a.env({env:o,cwd:s,execPath:n}):o})(r),r.stdio=l(r),"win32"===process.platform&&"cmd"===s.basename(e,".exe")&&t.unshift("/q"),{file:e,args:t,options:r,parsed:n}},T=(e,t,r)=>"string"==typeof t||Buffer.isBuffer(t)?e.stripFinalNewline?i(t):t:void 0===r?void 0:"",O=(e,t,r)=>{const s=C(e,t,r),o=S(e,t),i=E(e,t);let a;f(s.options);try{a=n.spawn(s.file,s.args,s.options)}catch(e){const t=new n.ChildProcess,r=Promise.reject(h({error:e,stdout:"",stderr:"",all:"",command:o,escapedCommand:i,parsed:s,timedOut:!1,isCanceled:!1,killed:!1}));return w(t,r)}const l=v(a),_=p(a,s.options,l),x=m(a,s.options,_),O={isCanceled:!1};a.kill=d.bind(null,a.kill.bind(a)),a.cancel=u.bind(null,a,O);const P=c((async()=>{const[{error:e,exitCode:t,signal:r,timedOut:n},c,l,d]=await g(a,s.options,x),u=T(s.options,c),p=T(s.options,l),f=T(s.options,d);if(e||0!==t||null!==r){const c=h({error:e,exitCode:t,signal:r,stdout:u,stderr:p,all:f,command:o,escapedCommand:i,parsed:s,timedOut:n,isCanceled:O.isCanceled,killed:a.killed});if(!s.options.reject)return c;throw c}return{command:o,escapedCommand:i,exitCode:0,stdout:u,stderr:p,all:f,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}));return y(a,s.options.input),a.all=b(a,s.options),w(a,P)};e.exports=O,e.exports.sync=(e,t,r)=>{const s=C(e,t,r),o=S(e,t),i=E(e,t);let a;_(s.options);try{a=n.spawnSync(s.file,s.args,s.options)}catch(e){throw h({error:e,stdout:"",stderr:"",all:"",command:o,escapedCommand:i,parsed:s,timedOut:!1,isCanceled:!1,killed:!1})}const c=T(s.options,a.stdout,a.error),l=T(s.options,a.stderr,a.error);if(a.error||0!==a.status||null!==a.signal){const e=h({stdout:c,stderr:l,error:a.error,signal:a.signal,exitCode:a.status,command:o,escapedCommand:i,parsed:s,timedOut:a.error&&"ETIMEDOUT"===a.error.code,isCanceled:!1,killed:null!==a.signal});if(!s.options.reject)return e;throw e}return{command:o,escapedCommand:i,exitCode:0,stdout:c,stderr:l,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}},e.exports.command=(e,t)=>{const[r,...s]=x(e);return O(r,s,t)},e.exports.commandSync=(e,t)=>{const[r,...s]=x(e);return O.sync(r,s,t)},e.exports.node=(e,t,r={})=>{t&&!Array.isArray(t)&&"object"==typeof t&&(r=t,t=[]);const s=l.node(r),n=process.execArgv.filter((e=>!e.startsWith("--inspect"))),{nodePath:o=process.execPath,nodeOptions:i=n}=r;return O(o,[...i,e,...Array.isArray(t)?t:[]],{...r,stdin:void 0,stdout:void 0,stderr:void 0,stdio:s,shell:!1})}},1882:e=>{"use strict";const t=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],r=/^[\w.-]+$/,s=/"/g,n=/ +/g;e.exports={joinCommand:(e,r)=>t(e,r).join(" "),getEscapedCommand:(e,n)=>t(e,n).map((e=>(e=>"string"!=typeof e||r.test(e)?e:`"${e.replace(s,'\\"')}"`)(e))).join(" "),parseCommand:e=>{const t=[];for(const r of e.trim().split(n)){const e=t[t.length-1];e&&e.endsWith("\\")?t[t.length-1]=`${e.slice(0,-1)} ${r}`:t.push(r)}return t}}},3697:(e,t,r)=>{"use strict";const{signalsByName:s}=r(2751);e.exports=({stdout:e,stderr:t,all:r,error:n,signal:o,exitCode:i,command:a,escapedCommand:c,timedOut:h,isCanceled:l,killed:d,parsed:{options:{timeout:u}}})=>{i=null===i?void 0:i;const p=void 0===(o=null===o?void 0:o)?void 0:s[o].description,f=(({timedOut:e,timeout:t,errorCode:r,signal:s,signalDescription:n,exitCode:o,isCanceled:i})=>e?`timed out after ${t} milliseconds`:i?"was canceled":void 0!==r?`failed with ${r}`:void 0!==s?`was killed with ${s} (${n})`:void 0!==o?`failed with exit code ${o}`:"failed")({timedOut:h,timeout:u,errorCode:n&&n.code,signal:o,signalDescription:p,exitCode:i,isCanceled:l}),m=`Command ${f}: ${a}`,y="[object Error]"===Object.prototype.toString.call(n),g=y?`${m}\n${n.message}`:m,b=[g,t,e].filter(Boolean).join("\n");return y?(n.originalMessage=n.message,n.message=b):n=new Error(b),n.shortMessage=g,n.command=a,n.escapedCommand=c,n.exitCode=i,n.signal=o,n.signalDescription=p,n.stdout=e,n.stderr=t,void 0!==r&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=Boolean(h),n.isCanceled=l,n.killed=d&&!h,n}},4983:(e,t,r)=>{"use strict";const s=r(857),n=r(9468),o=(e,{forceKillAfterTimeout:t},r)=>i(e)&&!1!==t&&r,i=e=>e===s.constants.signals.SIGTERM||"string"==typeof e&&"SIGTERM"===e.toUpperCase(),a=({forceKillAfterTimeout:e=!0})=>{if(!0===e)return 5e3;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e};e.exports={spawnedKill:(e,t="SIGTERM",r={})=>{const s=e(t);return((e,t,r,s)=>{if(!o(t,r,s))return;const n=a(r),i=setTimeout((()=>{e("SIGKILL")}),n);i.unref&&i.unref()})(e,t,r,s),s},spawnedCancel:(e,t)=>{e.kill()&&(t.isCanceled=!0)},setupTimeout:(e,{timeout:t,killSignal:r="SIGTERM"},s)=>{if(0===t||void 0===t)return s;let n;const o=new Promise(((s,o)=>{n=setTimeout((()=>{((e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))})(e,r,o)}),t)})),i=s.finally((()=>{clearTimeout(n)}));return Promise.race([o,i])},validateTimeout:({timeout:e})=>{if(void 0!==e&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},setExitHandler:async(e,{cleanup:t,detached:r},s)=>{if(!t||r)return s;const o=n((()=>{e.kill()}));return s.finally((()=>{o()}))}}},8698:e=>{"use strict";const t=(async()=>{})().constructor.prototype,r=["then","catch","finally"].map((e=>[e,Reflect.getOwnPropertyDescriptor(t,e)]));e.exports={mergePromise:(e,t)=>{for(const[s,n]of r){const r="function"==typeof t?(...e)=>Reflect.apply(n.value,t(),e):n.value.bind(t);Reflect.defineProperty(e,s,{...n,value:r})}return e},getSpawnedPromise:e=>new Promise(((t,r)=>{e.on("exit",((e,r)=>{t({exitCode:e,signal:r})})),e.on("error",(e=>{r(e)})),e.stdin&&e.stdin.on("error",(e=>{r(e)}))}))}},2854:e=>{"use strict";const t=["stdin","stdout","stderr"],r=e=>{if(!e)return;const{stdio:r}=e;if(void 0===r)return t.map((t=>e[t]));if((e=>t.some((t=>void 0!==e[t])))(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${t.map((e=>`\`${e}\``)).join(", ")}`);if("string"==typeof r)return r;if(!Array.isArray(r))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof r}\``);const s=Math.max(r.length,t.length);return Array.from({length:s},((e,t)=>r[t]))};e.exports=r,e.exports.node=e=>{const t=r(e);return"ipc"===t?"ipc":void 0===t||"string"==typeof t?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}},2463:(e,t,r)=>{"use strict";const s=r(1232),n=r(4594),o=r(7882),i=async(e,t)=>{if(e){e.destroy();try{return await t}catch(e){return e.bufferedData}}},a=(e,{encoding:t,buffer:r,maxBuffer:s})=>{if(e&&r)return t?n(e,{encoding:t,maxBuffer:s}):n.buffer(e,{maxBuffer:s})};e.exports={handleInput:(e,t)=>{void 0!==t&&void 0!==e.stdin&&(s(t)?t.pipe(e.stdin):e.stdin.end(t))},makeAllStream:(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;const r=o();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},getSpawnedResult:async({stdout:e,stderr:t,all:r},{encoding:s,buffer:n,maxBuffer:o},c)=>{const h=a(e,{encoding:s,buffer:n,maxBuffer:o}),l=a(t,{encoding:s,buffer:n,maxBuffer:o}),d=a(r,{encoding:s,buffer:n,maxBuffer:2*o});try{return await Promise.all([c,h,l,d])}catch(s){return Promise.all([{error:s,signal:s.signal,timedOut:s.timedOut},i(e,h),i(t,l),i(r,d)])}},validateInputSync:({input:e})=>{if(s(e))throw new TypeError("The `input` option cannot be a stream in sync mode")}}},5635:(e,t,r)=>{"use strict";const{PassThrough:s}=r(2203);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const n="buffer"===r;let o=!1;t?o=!(r||n):r=r||"utf8",n&&(r=null);const i=new s({objectMode:o});r&&i.setEncoding(r);let a=0;const c=[];return i.on("data",(e=>{c.push(e),o?a=c.length:a+=e.length})),i.getBufferedValue=()=>t?c:n?Buffer.concat(c,a):c.join(""),i.getBufferedLength=()=>a,i}},4594:(e,t,r)=>{"use strict";const{constants:s}=r(181),n=r(2203),{promisify:o}=r(9023),i=r(5635),a=o(n.pipeline);class c extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function h(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};const{maxBuffer:r}=t,n=i(t);return await new Promise(((t,o)=>{const i=e=>{e&&n.getBufferedLength()<=s.MAX_LENGTH&&(e.bufferedData=n.getBufferedValue()),o(e)};(async()=>{try{await a(e,n),t()}catch(e){i(e)}})(),n.on("data",(()=>{n.getBufferedLength()>r&&i(new c)}))})),n.getBufferedValue()}e.exports=h,e.exports.buffer=(e,t)=>h(e,{...t,encoding:"buffer"}),e.exports.array=(e,t)=>h(e,{...t,array:!0}),e.exports.MaxBufferError=c},7234:e=>{"use strict";const t=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),r=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),s=new Set([500,502,503,504]),n={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},o={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function i(e){const t=parseInt(e,10);return isFinite(t)?t:0}function a(e){const t={};if(!e)return t;const r=e.trim().split(/,/);for(const e of r){const[r,s]=e.split(/=/,2);t[r.trim()]=void 0===s||s.trim().replace(/^"|"$/g,"")}return t}function c(e){let t=[];for(const r in e){const s=e[r];t.push(!0===s?r:r+"="+s)}if(t.length)return t.join(", ")}e.exports=class{constructor(e,t,{shared:r,cacheHeuristic:s,immutableMinTimeToLive:n,ignoreCargoCult:o,_fromObject:i}={}){if(i)this._fromObject(i);else{if(!t||!t.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=!1!==r,this._cacheHeuristic=void 0!==s?s:.1,this._immutableMinTtl=void 0!==n?n:864e5,this._status="status"in t?t.status:200,this._resHeaders=t.headers,this._rescc=a(t.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=t.headers.vary?e.headers:null,this._reqcc=a(e.headers["cache-control"]),o&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":c(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),null==t.headers["cache-control"]&&/no-cache/.test(t.headers.pragma)&&(this._rescc["no-cache"]=!0)}}now(){return Date.now()}storable(){return!(this._reqcc["no-store"]||!("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())||!r.has(this._status)||this._rescc["no-store"]||this._isShared&&this._rescc.private||this._isShared&&!this._noAuthorization&&!this._allowsStoringAuthenticated()||!(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||t.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);const t=a(e.headers["cache-control"]);return!t["no-cache"]&&!/no-cache/.test(e.headers.pragma)&&(!(t["max-age"]&&this.age()>t["max-age"])&&(!(t["min-fresh"]&&this.timeToLive()<1e3*t["min-fresh"])&&(!(this.stale()&&(!t["max-stale"]||this._rescc["must-revalidate"]||!(!0===t["max-stale"]||t["max-stale"]>this.age()-this.maxAge())))&&this._requestMatches(e,!1))))}_requestMatches(e,t){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||t&&"HEAD"===e.method)&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;const t=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const r of t)if(e.headers[r]!==this._reqHeaders[r])return!1;return!0}_copyWithoutHopByHopHeaders(e){const t={};for(const r in e)n[r]||(t[r]=e[r]);if(e.connection){const r=e.connection.trim().split(/\s*,\s*/);for(const e of r)delete t[e]}if(t.warning){const e=t.warning.split(/,/).filter((e=>!/^\s*1[0-9][0-9]/.test(e)));e.length?t.warning=e.join(",").trim():delete t.warning}return t}responseHeaders(){const e=this._copyWithoutHopByHopHeaders(this._resHeaders),t=this.age();return t>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(t)}`,e.date=new Date(this.now()).toUTCString(),e}date(){const e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){return this._ageValue()+(this.now()-this._responseTime)/1e3}_ageValue(){return i(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"])return 0;if(this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)return 0;if("*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return i(this._rescc["s-maxage"])}if(this._rescc["max-age"])return i(this._rescc["max-age"]);const e=this._rescc.immutable?this._immutableMinTtl:0,t=this.date();if(this._resHeaders.expires){const r=Date.parse(this._resHeaders.expires);return Number.isNaN(r)||r<t?0:Math.max(e,(r-t)/1e3)}if(this._resHeaders["last-modified"]){const r=Date.parse(this._resHeaders["last-modified"]);if(isFinite(r)&&t>r)return Math.max(e,(t-r)/1e3*this._cacheHeuristic)}return e}timeToLive(){const e=this.maxAge()-this.age(),t=e+i(this._rescc["stale-if-error"]),r=e+i(this._rescc["stale-while-revalidate"]);return 1e3*Math.max(0,e,t,r)}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+i(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+i(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||1!==e.v)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=void 0!==e.imm?e.imm:864e5,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);const t=this._copyWithoutHopByHopHeaders(e.headers);if(delete t["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete t["if-none-match"],delete t["if-modified-since"],t;if(this._resHeaders.etag&&(t["if-none-match"]=t["if-none-match"]?`${t["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),t["accept-ranges"]||t["if-match"]||t["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete t["if-modified-since"],t["if-none-match"]){const e=t["if-none-match"].split(/,/).filter((e=>!/^\s*W\//.test(e)));e.length?t["if-none-match"]=e.join(",").trim():delete t["if-none-match"]}}else this._resHeaders["last-modified"]&&!t["if-modified-since"]&&(t["if-modified-since"]=this._resHeaders["last-modified"]);return t}revalidatedPolicy(e,t){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&function(e){return!e||s.has(e.status)}(t))return{modified:!1,matches:!1,policy:this};if(!t||!t.headers)throw Error("Response headers missing");let r=!1;if(void 0!==t.status&&304!=t.status?r=!1:t.headers.etag&&!/^\s*W\//.test(t.headers.etag)?r=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag:this._resHeaders.etag&&t.headers.etag?r=this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?r=this._resHeaders["last-modified"]===t.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||t.headers.etag||t.headers["last-modified"]||(r=!0),!r)return{policy:new this.constructor(e,t),modified:304!=t.status,matches:!1};const n={};for(const e in this._resHeaders)n[e]=e in t.headers&&!o[e]?t.headers[e]:this._resHeaders[e];const i=Object.assign({},t,{status:this._status,method:this._method,headers:n});return{policy:new this.constructor(e,i,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}},7444:(e,t,r)=>{"use strict";const{URL:s}=r(7016),n=r(4434),o=r(4756),i=r(5675),a=r(7392),c=r(2822),h=Symbol("currentStreamCount"),l=Symbol("request"),d=Symbol("cachedOriginSet"),u=Symbol("gracefullyClosing"),p=Symbol("length"),f=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],m=(e,t)=>e.remoteSettings.maxConcurrentStreams>t.remoteSettings.maxConcurrentStreams,y=(e,t)=>{for(let r=0;r<e.length;r++){const s=e[r];s[d].length>0&&s[d].length<t[d].length&&s[d].every((e=>t[d].includes(e)))&&s[h]+t[h]<=t.remoteSettings.maxConcurrentStreams&&b(s)}},g=(e,t)=>{for(let r=0;r<e.length;r++){const s=e[r];if(t[d].length>0&&t[d].length<s[d].length&&t[d].every((e=>s[d].includes(e)))&&t[h]+s[h]<=s.remoteSettings.maxConcurrentStreams)return b(t),!0}return!1},b=e=>{e[u]=!0,0===e[h]&&e.close()};class _ extends n{constructor({timeout:e=0,maxSessions:t=Number.POSITIVE_INFINITY,maxEmptySessions:r=10,maxCachedTlsSessions:s=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=t,this.maxEmptySessions=r,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:33554432},this.tlsSessionCache=new a({maxSize:s})}get protocol(){return"https:"}normalizeOptions(e){let t="";for(let r=0;r<f.length;r++){const s=f[r];t+=":",e&&void 0!==e[s]&&(t+=e[s])}return t}_processQueue(){if(this._sessionCount>=this.maxSessions)this.closeEmptySessions(this.maxSessions-this._sessionCount+1);else for(const e in this.queue)for(const t in this.queue[e]){const r=this.queue[e][t];r.completed||(r.completed=!0,r())}}_isBetterSession(e,t){return e>t}_accept(e,t,r,s){let n=0;for(;n<t.length&&e[h]<e.remoteSettings.maxConcurrentStreams;)t[n].resolve(e),n++;t.splice(0,n),t.length>0&&(this.getSession(r,s,t),t.length=0)}getSession(e,t,r){return new Promise(((n,o)=>{Array.isArray(r)&&r.length>0?(r=[...r],n()):r=[{resolve:n,reject:o}];try{if("string"==typeof e)e=new s(e);else if(!(e instanceof s))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(t){const{servername:r}=t,{hostname:s}=e;if(r&&s!==r)throw new Error(`Origin ${s} differs from servername ${r}`)}}catch(e){for(let t=0;t<r.length;t++)r[t].reject(e);return}const a=this.normalizeOptions(t),c=e.origin;if(a in this.sessions){const e=this.sessions[a];let s,n=-1,o=-1;for(let t=0;t<e.length;t++){const r=e[t],i=r.remoteSettings.maxConcurrentStreams;if(i<n)break;if(!r[d].includes(c))continue;const a=r[h];a>=i||r[u]||r.destroyed||(s||(n=i),this._isBetterSession(a,o)&&(s=r,o=a))}if(s)return void this._accept(s,r,c,t)}if(a in this.queue){if(c in this.queue[a])return void this.queue[a][c].listeners.push(...r)}else this.queue[a]={[p]:0};const f=()=>{a in this.queue&&this.queue[a][c]===b&&(delete this.queue[a][c],0==--this.queue[a][p]&&delete this.queue[a])},b=async()=>{this._sessionCount++;const s=`${c}:${a}`;let n,o=!1;try{const _={...t};void 0===_.settings&&(_.settings=this.settings),void 0===_.session&&(_.session=this.tlsSessionCache.get(s));const w=_.createConnection||this.createConnection;n=await w.call(this,e,_),_.createConnection=()=>n;const v=i.connect(e,_);v[h]=0,v[u]=!1;const S=()=>{const{socket:e}=v;let t;return!1===e.servername?(e.servername=e.remoteAddress,t=v.originSet,e.servername=!1):t=v.originSet,t},x=()=>v[h]<v.remoteSettings.maxConcurrentStreams;v.socket.once("session",(e=>{this.tlsSessionCache.set(s,e)})),v.once("error",(e=>{for(let t=0;t<r.length;t++)r[t].reject(e);this.tlsSessionCache.delete(s)})),v.setTimeout(this.timeout,(()=>{v.destroy()})),v.once("close",(()=>{if(this._sessionCount--,o){this._emptySessionCount--;const e=this.sessions[a];1===e.length?delete this.sessions[a]:e.splice(e.indexOf(v),1)}else{f();const e=new Error("Session closed without receiving a SETTINGS frame");e.code="HTTP2WRAPPER_NOSETTINGS";for(let t=0;t<r.length;t++)r[t].reject(e)}this._processQueue()}));const E=()=>{const e=this.queue[a];if(!e)return;const t=v[d];for(let r=0;r<t.length;r++){const s=t[r];if(s in e){const{listeners:t,completed:r}=e[s];let n=0;for(;n<t.length&&x();)t[n].resolve(v),n++;if(e[s].listeners.splice(0,n),0===e[s].listeners.length&&!r&&(delete e[s],0==--e[p])){delete this.queue[a];break}if(!x())break}}};v.on("origin",(()=>{v[d]=S()||[],v[u]=!1,g(this.sessions[a],v),!v[u]&&x()&&(E(),x()&&y(this.sessions[a],v))})),v.once("remoteSettings",(()=>{if(b.destroyed){const e=new Error("Agent has been destroyed");for(let t=0;t<r.length;t++)r[t].reject(e);v.destroy()}else{if(v.setLocalWindowSize&&v.setLocalWindowSize(4194304),v[d]=S()||[],v.socket.encrypted){const e=v[d][0];if(e!==c){const t=new Error(`Requested origin ${c} does not match server ${e}`);for(let e=0;e<r.length;e++)r[e].reject(t);return void v.destroy()}}f();{const e=this.sessions;if(a in e){const t=e[a];t.splice(((e,t,r)=>{let s=0,n=e.length;for(;s<n;){const o=s+n>>>1;r(e[o],t)?s=o+1:n=o}return s})(t,v,m),0,v)}else e[a]=[v]}o=!0,this._emptySessionCount++,this.emit("session",v),this._accept(v,r,c,t),0===v[h]&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),v.on("remoteSettings",(()=>{x()&&(E(),x()&&y(this.sessions[a],v))}))}})),v[l]=v.request,v.request=(e,t)=>{if(v[u])throw new Error("The session is gracefully closing. No new streams are allowed.");const r=v[l](e,t);return v.ref(),0==v[h]++&&this._emptySessionCount--,r.once("close",(()=>{0==--v[h]&&(this._emptySessionCount++,v.unref(),this._emptySessionCount>this.maxEmptySessions||v[u])?v.close():v.destroyed||v.closed||x()&&!g(this.sessions[a],v)&&(y(this.sessions[a],v),E(),0===v[h]&&this._processQueue())})),r}}catch(e){f(),this._sessionCount--;for(let t=0;t<r.length;t++)r[t].reject(e)}};b.listeners=r,b.completed=!1,b.destroyed=!1,this.queue[a][c]=b,this.queue[a][p]++,this._processQueue()}))}request(e,t,r,s){return new Promise(((n,o)=>{this.getSession(e,t,[{reject:o,resolve:e=>{try{const t=e.request(r,s);c(t),n(t)}catch(e){o(e)}}}])}))}async createConnection(e,t){return _.connect(e,t)}static connect(e,t){t.ALPNProtocols=["h2"];const r=e.port||443,s=e.hostname;void 0===t.servername&&(t.servername=s);const n=o.connect(r,s,t);return t.socket&&(n._peername={family:void 0,address:void 0,port:r}),n}closeEmptySessions(e=Number.POSITIVE_INFINITY){let t=0;const{sessions:r}=this;for(const s in r){const n=r[s];for(let r=0;r<n.length;r++){const s=n[r];if(0===s[h]&&(t++,s.close(),t>=e))return t}}return t}destroy(e){const{sessions:t,queue:r}=this;for(const r in t){const s=t[r];for(let t=0;t<s.length;t++)s[t].destroy(e)}for(const e in r){const t=r[e];for(const e in t)t[e].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}}_.kCurrentStreamCount=h,_.kGracefullyClosing=u,e.exports={Agent:_,globalAgent:new _}},2094:(e,t,r)=>{"use strict";const{URL:s,urlToHttpOptions:n}=r(7016),o=r(8611),i=r(5692),a=r(1169),c=r(7392),{Agent:h,globalAgent:l}=r(7444),d=r(2734),u=r(491),p=r(2822),f=new c({maxSize:100}),m=(e,t=new Map,r=void 0)=>async s=>{const n=`${s.host}:${s.port}:${s.ALPNProtocols.sort()}`;if(!e.has(n)){if(t.has(n))return{alpnProtocol:(await t.get(n)).alpnProtocol};const{path:o}=s;s.path=s.socketPath;const i=a(s,r);t.set(n,i);try{const r=await i;return e.set(n,r.alpnProtocol),t.delete(n),s.path=o,r}catch(e){throw t.delete(n),s.path=o,e}}return{alpnProtocol:e.get(n)}},y=m(f,new Map);e.exports=async(e,t,r)=>{if(e="string"==typeof e?n(new s(e)):e instanceof s?n(e):{...e},"function"==typeof t||void 0===t?(r=t,t=e):t=Object.assign(e,t),t.ALPNProtocols=t.ALPNProtocols||["h2","http/1.1"],!Array.isArray(t.ALPNProtocols)||0===t.ALPNProtocols.length)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");t.protocol=t.protocol||"https:";const a="https:"===t.protocol;t.host=t.hostname||t.host||"localhost",t.session=t.tlsSession,t.servername=t.servername||u(t.headers&&t.headers.host||t.host),t.port=t.port||(a?443:80),t._defaultAgent=a?i.globalAgent:o.globalAgent;const c=t.resolveProtocol||y;let{agent:f}=t;if(void 0!==f&&!1!==f&&"Object"!==f.constructor.name)throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(a){t.resolveSocket=!0;let{socket:e,alpnProtocol:s,timeout:n}=await c(t);if(n){e&&e.destroy();const r=new Error(`Timed out resolving ALPN: ${t.timeout} ms`);throw r.code="ETIMEDOUT",r.ms=t.timeout,r}e&&t.createConnection&&(e.destroy(),e=void 0),delete t.resolveSocket;const o="h2"===s;if(f&&(f=o?f.http2:f.https,t.agent=f),void 0===f&&(f=o?l:i.globalAgent),e)if(!1===f)e.destroy();else{const r=(o?h:i.Agent).prototype.createConnection;f.createConnection===r?o?t._reuseSocket=e:((e,t,r)=>{t._httpMessage={shouldKeepAlive:!0};const s=()=>{e.emit("free",t,r)};t.on("free",s);const n=()=>{e.removeSocket(t,r)};t.on("close",n);const o=()=>{const{freeSockets:r}=e;for(const e of Object.values(r))if(e.includes(t))return void t.destroy()};t.on("timeout",o);const i=()=>{e.removeSocket(t,r),t.off("close",n),t.off("free",s),t.off("timeout",o),t.off("agentRemove",i)};t.on("agentRemove",i),e.emit("free",t,r)})(f,e,t):e.destroy()}if(o)return p(new d(t,r))}else f&&(t.agent=f.http);return t.headers&&(t.headers={...t.headers},t.headers[":authority"]&&(t.headers.host||(t.headers.host=t.headers[":authority"]),delete t.headers[":authority"]),delete t.headers[":method"],delete t.headers[":scheme"],delete t.headers[":path"]),p(o.request(t,r))},e.exports.protocolCache=f,e.exports.resolveProtocol=y,e.exports.createResolveProtocol=m},2734:(e,t,r)=>{"use strict";const{URL:s,urlToHttpOptions:n}=r(7016),o=r(5675),{Writable:i}=r(2203),{Agent:a,globalAgent:c}=r(7444),h=r(7235),l=r(1125),{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_PROTOCOL:u,ERR_HTTP_HEADERS_SENT:p}=r(3876),f=r(5711),m=r(9879),y=r(5332),{HTTP2_HEADER_STATUS:g,HTTP2_HEADER_METHOD:b,HTTP2_HEADER_PATH:_,HTTP2_HEADER_AUTHORITY:w,HTTP2_METHOD_CONNECT:v}=o.constants,S=Symbol("headers"),x=Symbol("origin"),E=Symbol("session"),C=Symbol("options"),T=Symbol("flushedHeaders"),O=Symbol("jobs"),P=Symbol("pendingAgentPromise");e.exports=class extends i{constructor(e,t,r){if(super({autoDestroy:!1,emitClose:!1}),e="string"==typeof e?n(new s(e)):e instanceof s?n(e):{...e},"function"==typeof t||void 0===t?(r=t,t=e):t=Object.assign(e,t),t.h2session){if(this[E]=t.h2session,this[E].destroyed)throw new Error("The session has been closed already");this.protocol=this[E].socket.encrypted?"https:":"http:"}else if(!1===t.agent)this.agent=new a({maxEmptySessions:0});else if(void 0===t.agent||null===t.agent)this.agent=c;else{if("function"!=typeof t.agent.request)throw new d("options.agent",["http2wrapper.Agent-like Object","undefined","false"],t.agent);this.agent=t.agent}if(this.agent&&(this.protocol=this.agent.protocol),t.protocol&&t.protocol!==this.protocol)throw new u(t.protocol,this.protocol);t.port||(t.port=t.defaultPort||this.agent&&this.agent.defaultPort||443),t.host=t.hostname||t.host||"localhost",delete t.hostname;const{timeout:o}=t;t.timeout=void 0,this[S]=Object.create(null),this[O]=[],this[P]=void 0,this.socket=null,this.connection=null,this.method=t.method||"GET",("CONNECT"!==this.method||"/"!==t.path&&void 0!==t.path)&&(this.path=t.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;const{headers:i}=t;if(i)for(const e in i)this.setHeader(e,i[e]);t.auth&&!("authorization"in this[S])&&(this[S].authorization="Basic "+Buffer.from(t.auth).toString("base64")),t.session=t.tlsSession,t.path=t.socketPath,this[C]=t,this[x]=new s(`${this.protocol}//${t.servername||t.host}:${t.port}`);const h=t._reuseSocket;h&&(t.createConnection=(...e)=>h.destroyed?this.agent.createConnection(...e):h,this.agent.getSession(this[x],this[C]).catch((()=>{}))),o&&this.setTimeout(o),r&&this.once("response",r),this[T]=!1}get method(){return this[S][b]}set method(e){e&&(this[S][b]=e.toUpperCase())}get path(){const e="CONNECT"===this.method?w:_;return this[S][e]}set path(e){if(e){const t="CONNECT"===this.method?w:_;this[S][t]=e}}get host(){return this[x].hostname}set host(e){}get _mustNotHaveABody(){return"GET"===this.method||"HEAD"===this.method||"DELETE"===this.method}_write(e,t,r){if(this._mustNotHaveABody)return void r(new Error("The GET, HEAD and DELETE methods must NOT have a body"));this.flushHeaders();const s=()=>this._request.write(e,t,r);this._request?s():this[O].push(s)}_final(e){this.flushHeaders();const t=()=>{this._mustNotHaveABody||"CONNECT"===this.method?e():this._request.end(e)};this._request?t():this[O].push(t)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick((()=>this.emit("abort"))),this.aborted=!0,this.destroy())}async _destroy(e,t){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick((()=>{this.emit("close")}));try{await this[P]}catch(t){this.aborted&&(e=t)}t(e)}async flushHeaders(){if(this[T]||this.destroyed)return;this[T]=!0;const e=this.method===v,t=t=>{if(this._request=t,this.destroyed)return void t.destroy();e||l(t,this,["timeout","continue"]),t.once("error",(e=>{this.destroy(e)})),t.once("aborted",(()=>{const{res:e}=this;e?(e.aborted=!0,e.emit("aborted"),e.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))}));const r=(r,s,n)=>{const o=new h(this.socket,t.readableHighWaterMark);this.res=o,o.url=`${this[x].origin}${this.path}`,o.req=this,o.statusCode=r[g],o.headers=r,o.rawHeaders=n,o.once("end",(()=>{o.complete=!0,o.socket=null,o.connection=null})),e?(o.upgrade=!0,this.emit("connect",o,t,Buffer.alloc(0))?this.emit("close"):t.destroy()):(t.on("data",(e=>{o._dumped||o.push(e)||t.pause()})),t.once("end",(()=>{this.aborted||o.push(null)})),this.emit("response",o)||o._dump())};t.once("response",r),t.once("headers",(e=>this.emit("information",{statusCode:e[g]}))),t.once("trailers",((e,t,s)=>{const{res:n}=this;null!==n?(n.trailers=e,n.rawTrailers=s):r(e,0,s)})),t.once("close",(()=>{const{aborted:e,res:t}=this;if(t){e&&(t.aborted=!0,t.emit("aborted"),t.destroy());const r=()=>{t.emit("close"),this.destroy(),this.emit("close")};t.readable?t.once("end",r):r()}else{if(!this.destroyed)return this.destroy(new Error("The HTTP/2 stream has been early terminated")),void this.emit("close");this.destroy(),this.emit("close")}})),this.socket=new Proxy(t,y);for(const e of this[O])e();this[O].length=0,this.emit("socket",this.socket)};if(w in this[S]||e||(this[S][w]=this[x].host),this[E])try{t(this[E].request(this[S]))}catch(e){this.destroy(e)}else{this.reusedSocket=!0;try{const e=this.agent.request(this[x],this[C],this[S]);this[P]=e,t(await e),this[P]=!1}catch(e){this[P]=!1,this.destroy(e)}}}get connection(){return this.socket}set connection(e){this.socket=e}getHeaderNames(){return Object.keys(this[S])}hasHeader(e){if("string"!=typeof e)throw new d("name","string",e);return Boolean(this[S][e.toLowerCase()])}getHeader(e){if("string"!=typeof e)throw new d("name","string",e);return this[S][e.toLowerCase()]}get headersSent(){return this[T]}removeHeader(e){if("string"!=typeof e)throw new d("name","string",e);if(this.headersSent)throw new p("remove");delete this[S][e.toLowerCase()]}setHeader(e,t){if(this.headersSent)throw new p("set");f(e),m(e,t);const r=e.toLowerCase();if("connection"===r){if("keep-alive"===t.toLowerCase())return;throw new Error(`Invalid 'connection' header: ${t}`)}"host"===r&&"CONNECT"===this.method?this[S][w]=t:this[S][r]=t}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,t){const r=()=>this._request.setTimeout(e,t);return this._request?r():this[O].push(r),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}}},7235:(e,t,r)=>{"use strict";const{Readable:s}=r(2203);e.exports=class extends s{constructor(e,t){super({emitClose:!1,autoDestroy:!0,highWaterMark:t}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this._dumped=!1}get connection(){return this.socket}set connection(e){this.socket=e}_destroy(e,t){this.readableEnded||(this.aborted=!0),t(),this.req._request.destroy(e)}setTimeout(e,t){return this.req.setTimeout(e,t),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}}},5769:(e,t,r)=>{"use strict";const s=r(5675),{Agent:n,globalAgent:o}=r(7444),i=r(2734),a=r(7235),c=r(2094),{HttpOverHttp2:h,HttpsOverHttp2:l}=r(201),d=r(312),{Http2OverHttp:u,Http2OverHttps:p}=r(449),f=r(5711),m=r(9879);e.exports={...s,ClientRequest:i,IncomingMessage:a,Agent:n,globalAgent:o,request:(e,t,r)=>new i(e,t,r),get:(e,t,r)=>{const s=new i(e,t,r);return s.end(),s},auto:c,proxies:{HttpOverHttp2:h,HttpsOverHttp2:l,Http2OverHttp2:d,Http2OverHttp:u,Http2OverHttps:p},validateHeaderName:f,validateHeaderValue:m}},9350:e=>{"use strict";e.exports=e=>{const{username:t,password:r}=e.proxyOptions.url;if(t||r){const e=`${t}:${r}`,s=`Basic ${Buffer.from(e).toString("base64")}`;return{"proxy-authorization":s,authorization:s}}return{}}},201:(e,t,r)=>{"use strict";const s=r(4756),n=r(8611),o=r(5692),i=r(6559),{globalAgent:a}=r(7444),c=r(3305),h=r(4394),l=r(9350),d=(e,t,r)=>{(async()=>{try{const{proxyOptions:n}=e,{url:h,headers:d,raw:u}=n,p=await a.request(h,n,{...l(e),...d,":method":"CONNECT",":authority":`${t.host}:${t.port}`});p.once("error",r),p.once("response",(n=>{const a=n[":status"];if(200!==a)return void r(new c(a,""));const h=e instanceof o.Agent;if(u&&h){t.socket=p;const e=s.connect(t);return e.once("close",(()=>{p.destroy()})),void r(null,e)}const l=new i(p);l.encrypted=!1,l._handle.getpeername=e=>{e.family=void 0,e.address=void 0,e.port=void 0},r(null,l)}))}catch(e){r(e)}})()};class u extends n.Agent{constructor(e){super(e),h(this,e.proxyOptions)}createConnection(e,t){d(this,e,t)}}class p extends o.Agent{constructor(e){super(e),h(this,e.proxyOptions)}createConnection(e,t){d(this,e,t)}}e.exports={HttpOverHttp2:u,HttpsOverHttp2:p}},449:(e,t,r)=>{"use strict";const s=r(8611),n=r(5692),o=r(6538),i=r(9350);class a extends o{async _getProxyStream(e){const{proxyOptions:t}=this,{url:r,headers:o}=this.proxyOptions;return a=("https:"===r.protocol?n:s).request({...t,hostname:r.hostname,port:r.port,path:e,headers:{...i(this),...o,host:e},method:"CONNECT"}).end(),new Promise(((e,t)=>{a.once("error",t),a.once("connect",((r,s,n)=>{s.unshift(n),a.off("error",t),e([s,r.statusCode,r.statusMessage])}))}));var a}}e.exports={Http2OverHttp:a,Http2OverHttps:a}},312:(e,t,r)=>{"use strict";const{globalAgent:s}=r(7444),n=r(6538),o=r(9350);e.exports=class extends n{async _getProxyStream(e){const{proxyOptions:t}=this,r={...o(this),...t.headers,":method":"CONNECT",":authority":e},n=await s.request(t.url,t,r),i=await(e=>new Promise(((t,r)=>{e.once("error",r),e.once("response",(s=>{e.off("error",r),t(s[":status"])}))})))(n);return[n,i,""]}}},6538:(e,t,r)=>{"use strict";const{Agent:s}=r(7444),n=r(6559),o=r(3305),i=r(4394);e.exports=class extends s{constructor(e){super(e),i(this,e.proxyOptions)}async createConnection(e,t){const r=`${e.hostname}:${e.port||443}`,[s,i,a]=await this._getProxyStream(r);if(200!==i)throw new o(i,a);if(!this.proxyOptions.raw){const e=new n(s);return e.encrypted=!1,e._handle.getpeername=e=>{e.family=void 0,e.address=void 0,e.port=void 0},e}return t.socket=s,super.createConnection(e,t)}}},4394:(e,t,r)=>{"use strict";const{URL:s}=r(7016),n=r(9420);e.exports=(e,t)=>{n("proxyOptions",t,["object"]),n("proxyOptions.headers",t.headers,["object","undefined"]),n("proxyOptions.raw",t.raw,["boolean","undefined"]),n("proxyOptions.url",t.url,[s,"string"]);const r=new s(t.url);e.proxyOptions={raw:!0,...t,headers:{...t.headers},url:r}}},3305:e=>{"use strict";class t extends Error{constructor(e,t=""){super(`The proxy server rejected the request with status code ${e} (${t||"empty status message"})`),this.statusCode=e,this.statusMessage=t}}e.exports=t},491:(e,t,r)=>{"use strict";const{isIP:s}=r(9278),n=r(2613);e.exports=e=>{const t=(e=>{if("["===e[0]){const t=e.indexOf("]");return n(-1!==t),e.slice(1,t)}const t=e.indexOf(":");return-1===t?e:e.slice(0,t)})(e);return s(t)?"":t}},9420:e=>{"use strict";e.exports=(e,t,r)=>{if(!r.some((e=>"string"==typeof e?typeof t===e:t instanceof e))){const s=r.map((e=>"string"==typeof e?e:e.name));throw new TypeError(`Expected '${e}' to be a type of ${s.join(" or ")}, got ${typeof t}`)}}},2822:e=>{"use strict";e.exports=e=>{if(0!==e.listenerCount("error"))return e;e.__destroy=e._destroy,e._destroy=(...t)=>{const r=t.pop();e.__destroy(...t,(async e=>{await Promise.resolve(),r(e)}))};const t=t=>{Promise.resolve().then((()=>{e.emit("error",t)}))};return e.once("error",t),Promise.resolve().then((()=>{e.off("error",t)})),e}},3876:e=>{"use strict";const t=(t,r,s)=>{e.exports[r]=class extends t{constructor(...e){super("string"==typeof s?s:s(e)),this.name=`${super.name} [${r}]`,this.code=r}}};t(TypeError,"ERR_INVALID_ARG_TYPE",(e=>{const t=e[0].includes(".")?"property":"argument";let r=e[1];const s=Array.isArray(r);return s&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${e[0]}" ${t} must be ${s?"one of":"of"} type ${r}. Received ${typeof e[2]}`})),t(TypeError,"ERR_INVALID_PROTOCOL",(e=>`Protocol "${e[0]}" not supported. Expected "${e[1]}"`)),t(Error,"ERR_HTTP_HEADERS_SENT",(e=>`Cannot ${e[0]} headers after they are sent to the client`)),t(TypeError,"ERR_INVALID_HTTP_TOKEN",(e=>`${e[0]} must be a valid HTTP token [${e[1]}]`)),t(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",(e=>`Invalid value "${e[0]} for header "${e[1]}"`)),t(TypeError,"ERR_INVALID_CHAR",(e=>`Invalid character in ${e[0]} [${e[1]}]`)),t(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")},3610:e=>{"use strict";e.exports=e=>{switch(e){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}},6559:(e,t,r)=>{"use strict";const s=r(2203),n=new(r(4756).TLSSocket)(new s.PassThrough)._handle._parentWrap.constructor;e.exports=n},1125:e=>{"use strict";e.exports=(e,t,r)=>{for(const s of r)e.on(s,((...e)=>t.emit(s,...e)))}},5332:(e,t,r)=>{"use strict";const{ERR_HTTP2_NO_SOCKET_MANIPULATION:s}=r(3876),n={has(e,t){const r=void 0===e.session?e:e.session.socket;return t in e||t in r},get(e,t){switch(t){case"on":case"once":case"end":case"emit":case"destroy":return e[t].bind(e);case"writable":case"destroyed":return e[t];case"readable":return!e.destroyed&&e.readable;case"setTimeout":{const{session:t}=e;return void 0!==t?t.setTimeout.bind(t):e.setTimeout.bind(e)}case"write":case"read":case"pause":case"resume":throw new s;default:{const r=void 0===e.session?e:e.session.socket,s=r[t];return"function"==typeof s?s.bind(r):s}}},getPrototypeOf:e=>void 0!==e.session?Reflect.getPrototypeOf(e.session.socket):Reflect.getPrototypeOf(e),set(e,t,r){switch(t){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return e[t]=r,!0;case"setTimeout":{const{session:t}=e;return void 0===t?e.setTimeout=r:t.setTimeout=r,!0}case"write":case"read":case"pause":case"resume":throw new s;default:return(void 0===e.session?e:e.session.socket)[t]=r,!0}}};e.exports=n},5711:(e,t,r)=>{"use strict";const{ERR_INVALID_HTTP_TOKEN:s}=r(3876),n=r(3610),o=/^[\^`\-\w!#$%&*+.|~]+$/;e.exports=e=>{if("string"!=typeof e||!o.test(e)&&!n(e))throw new s("Header name",e)}},9879:(e,t,r)=>{"use strict";const{ERR_HTTP_INVALID_HEADER_VALUE:s,ERR_INVALID_CHAR:n}=r(3876),o=/[^\t\u0020-\u007E\u0080-\u00FF]/;e.exports=(e,t)=>{if(void 0===t)throw new s(t,e);if(o.test(t))throw new n("header content",e)}},4417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIGNALS=void 0,t.SIGNALS=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}]},2751:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.signalsByNumber=t.signalsByName=void 0;var s=r(857),n=r(5089),o=r(9075);const i=(0,n.getSignals)().reduce((function(e,{name:t,number:r,description:s,supported:n,action:o,forced:i,standard:a}){return{...e,[t]:{name:t,number:r,description:s,supported:n,action:o,forced:i,standard:a}}}),{});t.signalsByName=i;const a=function(e,t){const r=t.find((({name:t})=>s.constants.signals[t]===e));return void 0!==r?r:t.find((t=>t.number===e))},c=function(){const e=(0,n.getSignals)(),t=o.SIGRTMAX+1,r=Array.from({length:t},((t,r)=>function(e,t){const r=a(e,t);if(void 0===r)return{};const{name:s,description:n,supported:o,action:i,forced:c,standard:h}=r;return{[e]:{name:s,number:e,description:n,supported:o,action:i,forced:c,standard:h}}}(r,e)));return Object.assign({},...r)}();t.signalsByNumber=c},9075:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIGRTMAX=t.getRealtimeSignals=void 0,t.getRealtimeSignals=function(){const e=n-s+1;return Array.from({length:e},r)};const r=function(e,t){return{name:`SIGRT${t+1}`,number:s+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},s=34,n=64;t.SIGRTMAX=n},5089:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSignals=void 0;var s=r(857),n=r(4417),o=r(9075);t.getSignals=function(){const e=(0,o.getRealtimeSignals)();return[...n.SIGNALS,...e].map(i)};const i=function({name:e,number:t,description:r,action:n,forced:o=!1,standard:i}){const{signals:{[e]:a}}=s.constants,c=void 0!==a;return{name:e,number:c?a:t,description:r,supported:c,action:n,forced:o,standard:i}}},1232:e=>{"use strict";const t=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;t.writable=e=>t(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,t.readable=e=>t(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,t.duplex=e=>t.writable(e)&&t.readable(e),t.transform=e=>t.duplex(e)&&"function"==typeof e._transform,e.exports=t},1147:(e,t,r)=>{var s;function n(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(r,s){n(e,t||{},(function(e,t){e?s(e):r(t)}))}))}s(e,t||{},(function(e,s){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,s=!1),r(e,s)}))}r(9896),s="win32"===process.platform||global.TESTING_WINDOWS?r(438):r(96),e.exports=n,n.sync=function(e,t){try{return s.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},96:(e,t,r)=>{e.exports=n,n.sync=function(e,t){return o(s.statSync(e),t)};var s=r(9896);function n(e,t,r){s.stat(e,(function(e,s){r(e,!e&&o(s,t))}))}function o(e,t){return e.isFile()&&function(e,t){var r=e.mode,s=e.uid,n=e.gid,o=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),i=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8);return r&parseInt("001",8)||r&c&&n===i||r&a&&s===o||r&(a|c)&&0===o}(e,t)}},438:(e,t,r)=>{e.exports=o,o.sync=function(e,t){return n(s.statSync(e),e,t)};var s=r(9896);function n(e,t,r){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var r=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!r)return!0;if(-1!==(r=r.split(";")).indexOf(""))return!0;for(var s=0;s<r.length;s++){var n=r[s].toLowerCase();if(n&&e.substr(-n.length).toLowerCase()===n)return!0}return!1}(t,r)}function o(e,t,r){s.stat(e,(function(s,o){r(s,!s&&n(o,e,t))}))}},5516:(e,t)=>{t.stringify=function e(t){if(void 0===t)return t;if(t&&Buffer.isBuffer(t))return JSON.stringify(":base64:"+t.toString("base64"));if(t&&t.toJSON&&(t=t.toJSON()),t&&"object"==typeof t){var r="",s=Array.isArray(t);r=s?"[":"{";var n=!0;for(var o in t){var i="function"==typeof t[o]||!s&&void 0===t[o];Object.hasOwnProperty.call(t,o)&&!i&&(n||(r+=","),n=!1,s?null==t[o]?r+="null":r+=e(t[o]):void 0!==t[o]&&(r+=e(o)+":"+e(t[o])))}return r+(s?"]":"}")}return"string"==typeof t?JSON.stringify(/^:/.test(t)?":"+t:t):void 0===t?"null":JSON.stringify(t)},t.parse=function(e){return JSON.parse(e,(function(e,t){return"string"==typeof t?/^:base64:/.test(t)?Buffer.from(t.substring(8),"base64"):/^:/.test(t)?t.substring(1):t:t}))}},8387:(e,t,r)=>{"use strict";const s=r(4434),n=r(5516),o=["sqlite","postgres","mysql","mongo","redis","tiered"];e.exports=class extends s{constructor(e,{emitErrors:t=!0,...s}={}){if(super(),this.opts={namespace:"keyv",serialize:n.stringify,deserialize:n.parse,..."string"==typeof e?{uri:e}:e,...s},!this.opts.store){const e={...this.opts};this.opts.store=(e=>{const t={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(e.adapter||e.uri){const s=e.adapter||/^[^:+]*/.exec(e.uri)[0];return new(r(6478)(t[s]))(e)}return new Map})(e)}if(this.opts.compression){const e=this.opts.compression;this.opts.serialize=e.serialize.bind(e),this.opts.deserialize=e.deserialize.bind(e)}"function"==typeof this.opts.store.on&&t&&this.opts.store.on("error",(e=>this.emit("error",e))),this.opts.store.namespace=this.opts.namespace;const o=e=>async function*(){for await(const[t,r]of"function"==typeof e?e(this.opts.store.namespace):e){const e=await this.opts.deserialize(r);this.opts.store.namespace&&!t.includes(this.opts.store.namespace)||("number"==typeof e.expires&&Date.now()>e.expires?this.delete(t):yield[this._getKeyUnprefix(t),e.value])}};"function"==typeof this.opts.store[Symbol.iterator]&&this.opts.store instanceof Map?this.iterator=o(this.opts.store):"function"==typeof this.opts.store.iterator&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=o(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return o.includes(this.opts.store.opts.dialect)||o.findIndex((e=>this.opts.store.opts.url.includes(e)))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map((e=>`${this.opts.namespace}:${e}`))}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,t){const{store:r}=this.opts,s=Array.isArray(e),n=s?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(s&&void 0===r.getMany){const e=[];for(const s of n)e.push(Promise.resolve().then((()=>r.get(s))).then((e=>"string"==typeof e||this.opts.compression?this.opts.deserialize(e):e)).then((e=>{if(null!=e)return"number"==typeof e.expires&&Date.now()>e.expires?this.delete(s).then((()=>{})):t&&t.raw?e:e.value})));return Promise.allSettled(e).then((e=>{const t=[];for(const r of e)t.push(r.value);return t}))}return Promise.resolve().then((()=>s?r.getMany(n):r.get(n))).then((e=>"string"==typeof e||this.opts.compression?this.opts.deserialize(e):e)).then((r=>{if(null!=r)return s?r.map(((r,s)=>{if("string"==typeof r&&(r=this.opts.deserialize(r)),null!=r){if(!("number"==typeof r.expires&&Date.now()>r.expires))return t&&t.raw?r:r.value;this.delete(e[s]).then((()=>{}))}})):"number"==typeof r.expires&&Date.now()>r.expires?this.delete(e).then((()=>{})):t&&t.raw?r:r.value}))}set(e,t,r){const s=this._getKeyPrefix(e);void 0===r&&(r=this.opts.ttl),0===r&&(r=void 0);const{store:n}=this.opts;return Promise.resolve().then((()=>{const e="number"==typeof r?Date.now()+r:null;return"symbol"==typeof t&&this.emit("error","symbol cannot be serialized"),t={value:t,expires:e},this.opts.serialize(t)})).then((e=>n.set(s,e,r))).then((()=>!0))}delete(e){const{store:t}=this.opts;if(Array.isArray(e)){const r=this._getKeyPrefixArray(e);if(void 0===t.deleteMany){const e=[];for(const s of r)e.push(t.delete(s));return Promise.allSettled(e).then((e=>e.every((e=>!0===e.value))))}return Promise.resolve().then((()=>t.deleteMany(r)))}const r=this._getKeyPrefix(e);return Promise.resolve().then((()=>t.delete(r)))}clear(){const{store:e}=this.opts;return Promise.resolve().then((()=>e.clear()))}has(e){const t=this._getKeyPrefix(e),{store:r}=this.opts;return Promise.resolve().then((async()=>"function"==typeof r.has?r.has(t):void 0!==await r.get(t)))}disconnect(){const{store:e}=this.opts;if("function"==typeof e.disconnect)return e.disconnect()}}},6478:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=6478,e.exports=t},7882:(e,t,r)=>{"use strict";const{PassThrough:s}=r(2203);e.exports=function(){var e=[],t=new s({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=function(){return 0==e.length},t.on("unpipe",n),Array.prototype.slice.call(arguments).forEach(r),t;function r(s){return Array.isArray(s)?(s.forEach(r),this):(e.push(s),s.once("end",n.bind(null,s)),s.once("error",t.emit.bind(t,"error")),s.pipe(t,{end:!1}),this)}function n(r){!(e=e.filter((function(e){return e!==r}))).length&&t.readable&&t.end()}}},4865:e=>{"use strict";const t=(e,t)=>{for(const r of Reflect.ownKeys(t))Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));return e};e.exports=t,e.exports.default=t},4458:(e,t,r)=>{"use strict";const s=r(6928),n=r(9376),o=e=>{let t;e={cwd:process.cwd(),path:process.env[n()],execPath:process.execPath,...e};let r=s.resolve(e.cwd);const o=[];for(;t!==r;)o.push(s.join(r,"node_modules/.bin")),t=r,r=s.resolve(r,"..");const i=s.resolve(e.cwd,e.execPath,"..");return o.push(i),o.concat(e.path).join(s.delimiter)};e.exports=o,e.exports.default=o,e.exports.env=t=>{const r={...(t={env:process.env,...t}).env},s=n({env:r});return t.path=r[s],r[s]=e.exports(t),r}},6034:(e,t,r)=>{"use strict";const s=r(4865),n=new WeakMap,o=(e,t={})=>{if("function"!=typeof e)throw new TypeError("Expected a function");let r,o=0;const i=e.displayName||e.name||"<anonymous>",a=function(...s){if(n.set(a,++o),1===o)r=e.apply(this,s),e=null;else if(!0===t.throw)throw new Error(`Function \`${i}\` can only be called once`);return r};return s(a,e),n.set(a,o),a};e.exports=o,e.exports.default=o,e.exports.callCount=e=>{if(!n.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return n.get(e)}},9376:e=>{"use strict";const t=(e={})=>{const t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find((e=>"PATH"===e.toUpperCase()))||"Path"};e.exports=t,e.exports.default=t},7392:e=>{"use strict";class t{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){if(this.cache.set(e,t),this._size++,this._size>=this.maxSize){if(this._size=0,"function"==typeof this.onEviction)for(const[e,t]of this.oldCache.entries())this.onEviction(e,t);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}}e.exports=t},1169:(e,t,r)=>{"use strict";const s=r(4756);e.exports=(e={},t=s.connect)=>new Promise(((r,s)=>{let n,o=!1;const i=async()=>{await c,n.off("timeout",a),n.off("error",s),e.resolveSocket?(r({alpnProtocol:n.alpnProtocol,socket:n,timeout:o}),o&&(await Promise.resolve(),n.emit("timeout"))):(n.destroy(),r({alpnProtocol:n.alpnProtocol,timeout:o}))},a=async()=>{o=!0,i()},c=(async()=>{try{n=await t(e,i),n.on("error",s),n.once("timeout",a)}catch(e){s(e)}})()}))},1395:(e,t,r)=>{"use strict";const s=r(7521);e.exports=(e="")=>{const t=e.match(s);if(!t)return null;const[r,n]=t[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return"env"===o?n:n?`${o} ${n}`:o}},7521:e=>{"use strict";e.exports=/^#!(.*)/},9468:(e,t,r)=>{var s=global.process;const n=function(e){return e&&"object"==typeof e&&"function"==typeof e.removeListener&&"function"==typeof e.emit&&"function"==typeof e.reallyExit&&"function"==typeof e.listeners&&"function"==typeof e.kill&&"number"==typeof e.pid&&"function"==typeof e.on};if(n(s)){var o,i=r(2613),a=r(7205),c=/^win/i.test(s.platform),h=r(4434);"function"!=typeof h&&(h=h.EventEmitter),s.__signal_exit_emitter__?o=s.__signal_exit_emitter__:((o=s.__signal_exit_emitter__=new h).count=0,o.emitted={}),o.infinite||(o.setMaxListeners(1/0),o.infinite=!0),e.exports=function(e,t){if(!n(global.process))return function(){};i.equal(typeof e,"function","a callback must be provided for exit handler"),!1===p&&f();var r="exit";return t&&t.alwaysLast&&(r="afterexit"),o.on(r,e),function(){o.removeListener(r,e),0===o.listeners("exit").length&&0===o.listeners("afterexit").length&&l()}};var l=function(){p&&n(global.process)&&(p=!1,a.forEach((function(e){try{s.removeListener(e,u[e])}catch(e){}})),s.emit=g,s.reallyExit=m,o.count-=1)};e.exports.unload=l;var d=function(e,t,r){o.emitted[e]||(o.emitted[e]=!0,o.emit(e,t,r))},u={};a.forEach((function(e){u[e]=function(){n(global.process)&&s.listeners(e).length===o.count&&(l(),d("exit",null,e),d("afterexit",null,e),c&&"SIGHUP"===e&&(e="SIGINT"),s.kill(s.pid,e))}})),e.exports.signals=function(){return a};var p=!1,f=function(){!p&&n(global.process)&&(p=!0,o.count+=1,a=a.filter((function(e){try{return s.on(e,u[e]),!0}catch(e){return!1}})),s.emit=b,s.reallyExit=y)};e.exports.load=f;var m=s.reallyExit,y=function(e){n(global.process)&&(s.exitCode=e||0,d("exit",s.exitCode,null),d("afterexit",s.exitCode,null),m.call(s,s.exitCode))},g=s.emit,b=function(e,t){if("exit"===e&&n(global.process)){void 0!==t&&(s.exitCode=t);var r=g.apply(this,arguments);return d("exit",s.exitCode,null),d("afterexit",s.exitCode,null),r}return g.apply(this,arguments)}}else e.exports=function(){return function(){}}},7205:e=>{e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&e.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")},2993:e=>{"use strict";e.exports=e=>{const t="string"==typeof e?"\n":"\n".charCodeAt(),r="string"==typeof e?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===r&&(e=e.slice(0,e.length-1)),e}},6911:(e,t,r)=>{const s="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,n=r(6928),o=s?";":":",i=r(1147),a=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),c=(e,t)=>{const r=t.colon||o,n=e.match(/\//)||s&&e.match(/\\/)?[""]:[...s?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],i=s?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",a=s?i.split(r):[""];return s&&-1!==e.indexOf(".")&&""!==a[0]&&a.unshift(""),{pathEnv:n,pathExt:a,pathExtExe:i}},h=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),t||(t={});const{pathEnv:s,pathExt:o,pathExtExe:h}=c(e,t),l=[],d=r=>new Promise(((o,i)=>{if(r===s.length)return t.all&&l.length?o(l):i(a(e));const c=s[r],h=/^".*"$/.test(c)?c.slice(1,-1):c,d=n.join(h,e),p=!h&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;o(u(p,r,0))})),u=(e,r,s)=>new Promise(((n,a)=>{if(s===o.length)return n(d(r+1));const c=o[s];i(e+c,{pathExt:h},((o,i)=>{if(!o&&i){if(!t.all)return n(e+c);l.push(e+c)}return n(u(e,r,s+1))}))}));return r?d(0).then((e=>r(null,e)),r):d(0)};e.exports=h,h.sync=(e,t)=>{t=t||{};const{pathEnv:r,pathExt:s,pathExtExe:o}=c(e,t),h=[];for(let a=0;a<r.length;a++){const c=r[a],l=/^".*"$/.test(c)?c.slice(1,-1):c,d=n.join(l,e),u=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;for(let e=0;e<s.length;e++){const r=u+s[e];try{if(i.sync(r,{pathExt:o})){if(!t.all)return r;h.push(r)}}catch(e){}}}if(t.all&&h.length)return h;if(t.nothrow)return null;throw a(e)}},2613:e=>{"use strict";e.exports=require("assert")},181:e=>{"use strict";e.exports=require("buffer")},5317:e=>{"use strict";e.exports=require("child_process")},4434:e=>{"use strict";e.exports=require("events")},9896:e=>{"use strict";e.exports=require("fs")},8611:e=>{"use strict";e.exports=require("http")},5675:e=>{"use strict";e.exports=require("http2")},5692:e=>{"use strict";e.exports=require("https")},9278:e=>{"use strict";e.exports=require("net")},857:e=>{"use strict";e.exports=require("os")},6928:e=>{"use strict";e.exports=require("path")},2203:e=>{"use strict";e.exports=require("stream")},4756:e=>{"use strict";e.exports=require("tls")},7016:e=>{"use strict";e.exports=require("url")},9023:e=>{"use strict";e.exports=require("util")},3106:e=>{"use strict";e.exports=require("zlib")}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};(()=>{"use strict";r.r(s),r.d(s,{activate:()=>Ft,deactivate:()=>Wt});const e=require("vscode"),t=require("node:os"),n=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"],o=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...n],i=["null","undefined","string","number","bigint","boolean","symbol"];function a(e){return t=>typeof t===e}const{toString:c}=Object.prototype,h=e=>{const t=c.call(e).slice(8,-1);return/HTML\w+Element/.test(t)&&d.domElement(e)?"HTMLElement":(r=t,o.includes(r)?t:void 0);var r},l=e=>t=>h(t)===e;function d(e){if(null===e)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol"}if(d.observable(e))return"Observable";if(d.array(e))return"Array";if(d.buffer(e))return"Buffer";const t=h(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}d.undefined=a("undefined"),d.string=a("string");const u=a("number");d.number=e=>u(e)&&!d.nan(e),d.positiveNumber=e=>d.number(e)&&e>0,d.negativeNumber=e=>d.number(e)&&e<0,d.bigint=a("bigint"),d.function_=a("function"),d.null_=e=>null===e,d.class_=e=>d.function_(e)&&e.toString().startsWith("class "),d.boolean=e=>!0===e||!1===e,d.symbol=a("symbol"),d.numericString=e=>d.string(e)&&!d.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e)),d.array=(e,t)=>!!Array.isArray(e)&&(!d.function_(t)||e.every((e=>t(e)))),d.buffer=e=>e?.constructor?.isBuffer?.(e)??!1,d.blob=e=>l("Blob")(e),d.nullOrUndefined=e=>d.null_(e)||d.undefined(e),d.object=e=>!d.null_(e)&&("object"==typeof e||d.function_(e)),d.iterable=e=>d.function_(e?.[Symbol.iterator]),d.asyncIterable=e=>d.function_(e?.[Symbol.asyncIterator]),d.generator=e=>d.iterable(e)&&d.function_(e?.next)&&d.function_(e?.throw),d.asyncGenerator=e=>d.asyncIterable(e)&&d.function_(e.next)&&d.function_(e.throw),d.nativePromise=e=>l("Promise")(e),d.promise=e=>d.nativePromise(e)||(e=>d.function_(e?.then)&&d.function_(e?.catch))(e),d.generatorFunction=l("GeneratorFunction"),d.asyncGeneratorFunction=e=>"AsyncGeneratorFunction"===h(e),d.asyncFunction=e=>"AsyncFunction"===h(e),d.boundFunction=e=>d.function_(e)&&!e.hasOwnProperty("prototype"),d.regExp=l("RegExp"),d.date=l("Date"),d.error=l("Error"),d.map=e=>l("Map")(e),d.set=e=>l("Set")(e),d.weakMap=e=>l("WeakMap")(e),d.weakSet=e=>l("WeakSet")(e),d.weakRef=e=>l("WeakRef")(e),d.int8Array=l("Int8Array"),d.uint8Array=l("Uint8Array"),d.uint8ClampedArray=l("Uint8ClampedArray"),d.int16Array=l("Int16Array"),d.uint16Array=l("Uint16Array"),d.int32Array=l("Int32Array"),d.uint32Array=l("Uint32Array"),d.float32Array=l("Float32Array"),d.float64Array=l("Float64Array"),d.bigInt64Array=l("BigInt64Array"),d.bigUint64Array=l("BigUint64Array"),d.arrayBuffer=l("ArrayBuffer"),d.sharedArrayBuffer=l("SharedArrayBuffer"),d.dataView=l("DataView"),d.enumCase=(e,t)=>Object.values(t).includes(e),d.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype,d.urlInstance=e=>l("URL")(e),d.urlString=e=>{if(!d.string(e))return!1;try{return new URL(e),!0}catch{return!1}},d.truthy=e=>Boolean(e),d.falsy=e=>!e,d.nan=e=>Number.isNaN(e),d.primitive=e=>{return d.null_(e)||(t=typeof e,i.includes(t));var t},d.integer=e=>Number.isInteger(e),d.safeInteger=e=>Number.isSafeInteger(e),d.plainObject=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},d.typedArray=e=>{return t=h(e),n.includes(t);var t},d.arrayLike=e=>!d.nullOrUndefined(e)&&!d.function_(e)&&(e=>d.safeInteger(e)&&e>=0)(e.length),d.tupleLike=(e,t)=>!(!d.array(t)||!d.array(e)||t.length!==e.length)&&t.every(((t,r)=>t(e[r]))),d.inRange=(e,t)=>{if(d.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(d.array(t)&&2===t.length)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError(`Invalid range: ${JSON.stringify(t)}`)};const p=["innerHTML","ownerDocument","style","attributes","nodeValue"];d.domElement=e=>d.object(e)&&1===e.nodeType&&d.string(e.nodeName)&&!d.plainObject(e)&&p.every((t=>t in e)),d.observable=e=>!!e&&(e===e[Symbol.observable]?.()||e===e["@@observable"]?.()),d.nodeStream=e=>d.object(e)&&d.function_(e.pipe)&&!d.observable(e),d.infinite=e=>e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY;const f=e=>t=>d.integer(t)&&Math.abs(t%2)===e;d.evenInteger=f(0),d.oddInteger=f(1),d.emptyArray=e=>d.array(e)&&0===e.length,d.nonEmptyArray=e=>d.array(e)&&e.length>0,d.emptyString=e=>d.string(e)&&0===e.length,d.emptyStringOrWhitespace=e=>d.emptyString(e)||(e=>d.string(e)&&!/\S/.test(e))(e),d.nonEmptyString=e=>d.string(e)&&e.length>0,d.nonEmptyStringAndNotWhitespace=e=>d.string(e)&&!d.emptyStringOrWhitespace(e),d.emptyObject=e=>d.object(e)&&!d.map(e)&&!d.set(e)&&0===Object.keys(e).length,d.nonEmptyObject=e=>d.object(e)&&!d.map(e)&&!d.set(e)&&Object.keys(e).length>0,d.emptySet=e=>d.set(e)&&0===e.size,d.nonEmptySet=e=>d.set(e)&&e.size>0,d.emptyMap=e=>d.map(e)&&0===e.size,d.nonEmptyMap=e=>d.map(e)&&e.size>0,d.propertyKey=e=>d.any([d.string,d.number,d.symbol],e),d.formData=e=>l("FormData")(e),d.urlSearchParams=e=>l("URLSearchParams")(e);const m=(e,t,r)=>{if(!d.function_(t))throw new TypeError(`Invalid predicate: ${JSON.stringify(t)}`);if(0===r.length)throw new TypeError("Invalid number of values");return e.call(r,t)};d.any=(e,...t)=>(d.array(e)?e:[e]).some((e=>m(Array.prototype.some,e,t))),d.all=(e,...t)=>m(Array.prototype.every,e,t);const y=(e,t,r,s={})=>{if(!e){const{multipleValues:e}=s,n=e?`received values of types ${[...new Set(r.map((e=>`\`${d(e)}\``)))].join(", ")}`:`received value of type \`${d(r)}\``;throw new TypeError(`Expected value which is \`${t}\`, ${n}.`)}},g={undefined:e=>y(d.undefined(e),"undefined",e),string:e=>y(d.string(e),"string",e),number:e=>y(d.number(e),"number",e),positiveNumber:e=>y(d.positiveNumber(e),"positive number",e),negativeNumber:e=>y(d.negativeNumber(e),"negative number",e),bigint:e=>y(d.bigint(e),"bigint",e),function_:e=>y(d.function_(e),"Function",e),null_:e=>y(d.null_(e),"null",e),class_:e=>y(d.class_(e),"Class",e),boolean:e=>y(d.boolean(e),"boolean",e),symbol:e=>y(d.symbol(e),"symbol",e),numericString:e=>y(d.numericString(e),"string with a number",e),array:(e,t)=>{y(d.array(e),"Array",e),t&&e.forEach(t)},buffer:e=>y(d.buffer(e),"Buffer",e),blob:e=>y(d.blob(e),"Blob",e),nullOrUndefined:e=>y(d.nullOrUndefined(e),"null or undefined",e),object:e=>y(d.object(e),"Object",e),iterable:e=>y(d.iterable(e),"Iterable",e),asyncIterable:e=>y(d.asyncIterable(e),"AsyncIterable",e),generator:e=>y(d.generator(e),"Generator",e),asyncGenerator:e=>y(d.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>y(d.nativePromise(e),"native Promise",e),promise:e=>y(d.promise(e),"Promise",e),generatorFunction:e=>y(d.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>y(d.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>y(d.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>y(d.boundFunction(e),"Function",e),regExp:e=>y(d.regExp(e),"RegExp",e),date:e=>y(d.date(e),"Date",e),error:e=>y(d.error(e),"Error",e),map:e=>y(d.map(e),"Map",e),set:e=>y(d.set(e),"Set",e),weakMap:e=>y(d.weakMap(e),"WeakMap",e),weakSet:e=>y(d.weakSet(e),"WeakSet",e),weakRef:e=>y(d.weakRef(e),"WeakRef",e),int8Array:e=>y(d.int8Array(e),"Int8Array",e),uint8Array:e=>y(d.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>y(d.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>y(d.int16Array(e),"Int16Array",e),uint16Array:e=>y(d.uint16Array(e),"Uint16Array",e),int32Array:e=>y(d.int32Array(e),"Int32Array",e),uint32Array:e=>y(d.uint32Array(e),"Uint32Array",e),float32Array:e=>y(d.float32Array(e),"Float32Array",e),float64Array:e=>y(d.float64Array(e),"Float64Array",e),bigInt64Array:e=>y(d.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>y(d.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>y(d.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>y(d.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>y(d.dataView(e),"DataView",e),enumCase:(e,t)=>y(d.enumCase(e,t),"EnumCase",e),urlInstance:e=>y(d.urlInstance(e),"URL",e),urlString:e=>y(d.urlString(e),"string with a URL",e),truthy:e=>y(d.truthy(e),"truthy",e),falsy:e=>y(d.falsy(e),"falsy",e),nan:e=>y(d.nan(e),"NaN",e),primitive:e=>y(d.primitive(e),"primitive",e),integer:e=>y(d.integer(e),"integer",e),safeInteger:e=>y(d.safeInteger(e),"integer",e),plainObject:e=>y(d.plainObject(e),"plain object",e),typedArray:e=>y(d.typedArray(e),"TypedArray",e),arrayLike:e=>y(d.arrayLike(e),"array-like",e),tupleLike:(e,t)=>y(d.tupleLike(e,t),"tuple-like",e),domElement:e=>y(d.domElement(e),"HTMLElement",e),observable:e=>y(d.observable(e),"Observable",e),nodeStream:e=>y(d.nodeStream(e),"Node.js Stream",e),infinite:e=>y(d.infinite(e),"infinite number",e),emptyArray:e=>y(d.emptyArray(e),"empty array",e),nonEmptyArray:e=>y(d.nonEmptyArray(e),"non-empty array",e),emptyString:e=>y(d.emptyString(e),"empty string",e),emptyStringOrWhitespace:e=>y(d.emptyStringOrWhitespace(e),"empty string or whitespace",e),nonEmptyString:e=>y(d.nonEmptyString(e),"non-empty string",e),nonEmptyStringAndNotWhitespace:e=>y(d.nonEmptyStringAndNotWhitespace(e),"non-empty string and not whitespace",e),emptyObject:e=>y(d.emptyObject(e),"empty object",e),nonEmptyObject:e=>y(d.nonEmptyObject(e),"non-empty object",e),emptySet:e=>y(d.emptySet(e),"empty set",e),nonEmptySet:e=>y(d.nonEmptySet(e),"non-empty set",e),emptyMap:e=>y(d.emptyMap(e),"empty map",e),nonEmptyMap:e=>y(d.nonEmptyMap(e),"non-empty map",e),propertyKey:e=>y(d.propertyKey(e),"PropertyKey",e),formData:e=>y(d.formData(e),"FormData",e),urlSearchParams:e=>y(d.urlSearchParams(e),"URLSearchParams",e),evenInteger:e=>y(d.evenInteger(e),"even integer",e),oddInteger:e=>y(d.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>y(d.directInstanceOf(e,t),"T",e),inRange:(e,t)=>y(d.inRange(e,t),"in range",e),any:(e,...t)=>y(d.any(e,...t),"predicate returns truthy for any value",t,{multipleValues:!0}),all:(e,...t)=>y(d.all(e,...t),"predicate returns truthy for all values",t,{multipleValues:!0})};Object.defineProperties(d,{class:{value:d.class_},function:{value:d.function_},null:{value:d.null_}}),Object.defineProperties(g,{class:{value:g.class_},function:{value:g.function_},null:{value:g.null_}});const b=d,_=require("node:events");class w extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class v{static fn(e){return(...t)=>new v(((r,s,n)=>{t.push(n),e(...t).then(r,s)}))}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise(((t,r)=>{this._reject=r;const s=e=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(e)};Object.defineProperties(s,{shouldReject:{get:()=>this._rejectOnCancel,set:e=>{this._rejectOnCancel=e}}}),e((e=>{this._isCanceled&&s.shouldReject||(this._isPending=!1,t(e))}),(e=>{this._isPending=!1,r(e)}),s)}))}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(const e of this._cancelHandlers)e()}catch(e){return void this._reject(e)}this._rejectOnCancel&&this._reject(new w(e))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(v.prototype,Promise.prototype);class S extends Error{constructor(e,t,r){var s;if(super(e),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=t.code??"ERR_GOT_REQUEST_ERROR",this.input=t.input,s=r,b.object(s)&&"_onResponse"in s?(Object.defineProperty(this,"request",{enumerable:!1,value:r}),Object.defineProperty(this,"response",{enumerable:!1,value:r.response}),this.options=r.options):this.options=r,this.timings=this.request?.timings,b.string(t.stack)&&b.string(this.stack)){const e=this.stack.indexOf(this.message)+this.message.length,r=this.stack.slice(e).split("\n").reverse(),s=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split("\n").reverse();for(;s.length>0&&s[0]===r[0];)r.shift();this.stack=`${this.stack.slice(0,e)}${r.reverse().join("\n")}${s.reverse().join("\n")}`}}}class x extends S{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}}class E extends S{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}}class C extends S{constructor(e,t){super(e.message,e,t),this.name="CacheError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_CACHE_ACCESS":this.code}}class T extends S{constructor(e,t){super(e.message,e,t),this.name="UploadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_UPLOAD":this.code}}class O extends S{constructor(e,t,r){super(e.message,e,r),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.event=e.event,this.timings=t}}class P extends S{constructor(e,t){super(e.message,e,t),this.name="ReadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_READING_RESPONSE_STREAM":this.code}}class k extends S{constructor(e){super("Retrying",{},e),this.name="RetryError",this.code="ERR_RETRYING"}}class R extends S{constructor(e){super("This operation was aborted.",{},e),this.code="ERR_ABORTED",this.name="AbortError"}}const A=require("node:process"),I=require("node:buffer"),j=require("node:stream"),L=require("node:url"),H=require("node:http");var q=r(4434),N=r(9023),U=r(687);const $=require("node:crypto"),D=(e,t)=>t.some((t=>t instanceof RegExp?t.test(e):t===e)),M=new Set(["https:","http:","file:"]);var B=r(4594),z=r(7234);function G(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e.toLowerCase(),t])))}class F extends j.Readable{statusCode;headers;body;url;constructor({statusCode:e,headers:t,body:r,url:s}){if("number"!=typeof e)throw new TypeError("Argument `statusCode` should be a number");if("object"!=typeof t)throw new TypeError("Argument `headers` should be an object");if(!(r instanceof Uint8Array))throw new TypeError("Argument `body` should be a buffer");if("string"!=typeof s)throw new TypeError("Argument `url` should be a string");super({read(){this.push(r),this.push(null)}}),this.statusCode=e,this.headers=G(t),this.body=r,this.url=s}}var W=r(8387);const V=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];class J extends Error{constructor(e){super(e.message),Object.assign(this,e)}}class K extends Error{constructor(e){super(e.message),Object.assign(this,e)}}const Q=Object.entries,Y=e=>{const t={...e};return t.path=`${e.pathname||"/"}${e.search||""}`,delete t.pathname,delete t.search,t},X=e=>({protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}),Z=e=>{const t=[];for(const r of Object.keys(e))t[r.toLowerCase()]=e[r];return t},ee=class{constructor(e,t){this.hooks=new Map,this.request=()=>(e,t)=>{let r;if("string"==typeof e)r=X(L.parse(e)),e={};else if(e instanceof L.URL)r=X(L.parse(e.toString())),e={};else{const[t,...s]=(e.path??"").split("?"),n=s.length>0?`?${s.join("?")}`:"";r=X({...e,pathname:t,search:n})}(e={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...e,...Y(r)}).headers=Object.fromEntries(Q(e.headers).map((([e,t])=>[e.toLowerCase(),t])));const s=new _,n=function(e,t){if("string"!=typeof(t={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...t}).defaultProtocol||t.defaultProtocol.endsWith(":")||(t.defaultProtocol=`${t.defaultProtocol}:`),e=e.trim(),/^data:/i.test(e))return((e,{stripHash:t})=>{const r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:s,data:n,hash:o}=r.groups;const i=s.split(";");o=t?"":o;let a=!1;"base64"===i[i.length-1]&&(i.pop(),a=!0);const c=i.shift()?.toLowerCase()??"",h=[...i.map((e=>{let[t,r=""]=e.split("=").map((e=>e.trim()));return"charset"===t&&(r=r.toLowerCase(),"us-ascii"===r)?"":`${t}${r?`=${r}`:""}`})).filter(Boolean)];return a&&h.push("base64"),(h.length>0||c&&"text/plain"!==c)&&h.unshift(c),`data:${h.join(";")},${a?n.trim():n}${o?`#${o}`:""}`})(e,t);if((e=>{try{const{protocol:t}=new URL(e);return t.endsWith(":")&&!t.includes(".")&&!M.has(t)}catch{return!1}})(e))return e;const r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const s=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===s.protocol&&(s.protocol="http:"),t.forceHttps&&"http:"===s.protocol&&(s.protocol="https:"),t.stripAuthentication&&(s.username="",s.password=""),t.stripHash?s.hash="":t.stripTextFragment&&(s.hash=s.hash.replace(/#?:~:text.*?$/i,"")),s.pathname){const e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let t=0,r="";for(;;){const n=e.exec(s.pathname);if(!n)break;const o=n[0],i=n.index;r+=s.pathname.slice(t,i).replace(/\/{2,}/g,"/"),r+=o,t=i+o.length}r+=s.pathname.slice(t,s.pathname.length).replace(/\/{2,}/g,"/"),s.pathname=r}if(s.pathname)try{s.pathname=decodeURI(s.pathname)}catch{}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=s.pathname.split("/");const r=e[e.length-1];D(r,t.removeDirectoryIndex)&&(e=e.slice(0,-1),s.pathname=e.slice(1).join("/")+"/")}if(s.hostname&&(s.hostname=s.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(s.hostname)&&(s.hostname=s.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(const e of[...s.searchParams.keys()])D(e,t.removeQueryParameters)&&s.searchParams.delete(e);if(Array.isArray(t.keepQueryParameters)||!0!==t.removeQueryParameters||(s.search=""),Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0)for(const e of[...s.searchParams.keys()])D(e,t.keepQueryParameters)||s.searchParams.delete(e);if(t.sortQueryParameters){s.searchParams.sort();try{s.search=decodeURIComponent(s.search)}catch{}}t.removeTrailingSlash&&(s.pathname=s.pathname.replace(/\/$/,"")),t.removeExplicitPort&&s.port&&(s.port="");const n=e;return e=s.toString(),t.removeSingleSlash||"/"!==s.pathname||n.endsWith("/")||""!==s.hash||(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===s.pathname)&&""===s.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}(L.format(r),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1});let o=`${e.method}:${n}`;e.body&&void 0!==e.method&&["POST","PATCH","PUT"].includes(e.method)&&(e.body instanceof j.Readable?e.cache=!1:o+=`:${$.createHash("md5").update(e.body).digest("hex")}`);let i=!1,a=!1;const c=e=>{a=!0;let r=!1,n=()=>{};const c=new Promise((e=>{n=()=>{r||(r=!0,e())}})),h=async r=>{if(i){r.status=r.statusCode;const t=z.fromObject(i.cachePolicy).revalidatedPolicy(e,r);if(!t.modified){r.resume(),await new Promise((e=>{r.once("end",e)}));const e=Z(t.policy.responseHeaders());(r=new F({statusCode:i.statusCode,headers:e,body:i.body,url:i.url})).cachePolicy=t.policy,r.fromCache=!0}}let n;r.fromCache||(r.cachePolicy=new z(e,r,e),r.fromCache=!1),e.cache&&r.cachePolicy.storable()?(n=(e=>{const t=new j.PassThrough({autoDestroy:!1});return function(e,t){if(t._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const r=new Set([...Object.keys(e),...V]),s={};for(const n of r)n in t||(s[n]={get(){const t=e[n];return"function"==typeof t?t.bind(e):t},set(t){e[n]=t},enumerable:!0,configurable:!1});Object.defineProperties(t,s),e.once("aborted",(()=>{t.destroy(),t.emit("aborted")})),e.once("close",(()=>{e.complete&&t.readable?t.once("end",(()=>{t.emit("close")})):t.emit("close")}))}(e,t),e.pipe(t)})(r),(async()=>{try{const t=B.buffer(r);await Promise.race([c,new Promise((e=>r.once("end",e))),new Promise((e=>r.once("close",e)))]);const s=await t;let n={url:r.url,statusCode:r.fromCache?i.statusCode:r.statusCode,body:s,cachePolicy:r.cachePolicy.toObject()},a=e.strictTtl?r.cachePolicy.timeToLive():void 0;if(e.maxTtl&&(a=a?Math.min(a,e.maxTtl):e.maxTtl),this.hooks.size>0)for(const e of this.hooks.keys())n=await this.runHook(e,n,r);await this.cache.set(o,n,a)}catch(e){s.emit("error",new K(e))}})()):e.cache&&i&&(async()=>{try{await this.cache.delete(o)}catch(e){s.emit("error",new K(e))}})(),s.emit("response",n??r),"function"==typeof t&&t(n??r)};try{const t=this.cacheRequest(e,h);t.once("error",n),t.once("abort",n),t.once("destroy",n),s.emit("request",t)}catch(e){s.emit("error",new J(e))}};return(async()=>{const r=async e=>{await Promise.resolve();const r=e.cache?await this.cache.get(o):void 0;if(void 0===r&&!e.forceRefresh)return void c(e);const n=z.fromObject(r.cachePolicy);if(n.satisfiesWithoutRevalidation(e)&&!e.forceRefresh){const e=Z(n.responseHeaders()),o=new F({statusCode:r.statusCode,headers:e,body:r.body,url:r.url});o.cachePolicy=n,o.fromCache=!0,s.emit("response",o),"function"==typeof t&&t(o)}else n.satisfiesWithoutRevalidation(e)&&Date.now()>=n.timeToLive()&&e.forceRefresh?(await this.cache.delete(o),e.headers=n.revalidationHeaders(e),c(e)):(i=r,e.headers=n.revalidationHeaders(e),c(e))},n=e=>s.emit("error",new K(e));if(this.cache instanceof W){const e=this.cache;e.once("error",n),s.on("error",(()=>e.removeListener("error",n))),s.on("response",(()=>e.removeListener("error",n)))}try{await r(e)}catch(t){e.automaticFailover&&!a&&c(e),s.emit("error",new K(t))}})(),s},this.addHook=(e,t)=>{this.hooks.has(e)||this.hooks.set(e,t)},this.removeHook=e=>this.hooks.delete(e),this.getHook=e=>this.hooks.get(e),this.runHook=async(e,...t)=>this.hooks.get(e)?.(...t),this.cache=t instanceof W?t:new W("string"==typeof t?{uri:t,namespace:"cacheable-request"}:{store:t,namespace:"cacheable-request"}),this.request=this.request.bind(this),this.cacheRequest=e}};var te=r(602);const re=e=>"function"==typeof e,se=e=>Boolean(e&&re(e.constructor)&&"FormData"===e[Symbol.toStringTag]&&re(e.append)&&re(e.getAll)&&re(e.entries)&&re(e[Symbol.iterator])),ne=e=>{if(re(e[Symbol.asyncIterator]))return e;if(re(e.getReader))return async function*(e){const t=e.getReader();for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}(e);throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")},oe=e=>String(e).replace(/\r|\n/g,((e,t,r)=>"\r"===e&&"\n"!==r[t+1]||"\n"===e&&"\r"!==r[t-1]?"\r\n":e));function ie(e){if("object"!==(e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase())(e))return!1;const t=Object.getPrototypeOf(e);return null==t||(t.constructor&&t.constructor.toString())===Object.toString()}function ae(e,t){if("string"==typeof t)for(const[r,s]of Object.entries(e))if(t.toLowerCase()===r.toLowerCase())return s}const ce=e=>String(e).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),he=e=>Boolean(e&&"object"==typeof e&&re(e.constructor)&&"File"===e[Symbol.toStringTag]&&re(e.stream)&&null!=e.name);var le,de,ue,pe,fe,me,ye,ge,be,_e,we,ve=function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},Se=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};const xe={enableAdditionalHeaders:!1},Ee={writable:!1,configurable:!1};class Ce{constructor(e,t,r){if(le.add(this),de.set(this,"\r\n"),ue.set(this,void 0),pe.set(this,void 0),fe.set(this,"-".repeat(2)),me.set(this,new TextEncoder),ye.set(this,void 0),ge.set(this,void 0),be.set(this,void 0),!se(e))throw new TypeError("Expected first argument to be a FormData instance.");let s;if(ie(t)?r=t:s=t,s||(s=function(){let e=16,t="";for(;e--;)t+="abcdefghijklmnopqrstuvwxyz0123456789"[36*Math.random()|0];return t}()),"string"!=typeof s)throw new TypeError("Expected boundary argument to be a string.");if(r&&!ie(r))throw new TypeError("Expected options argument to be an object.");ve(this,ge,Array.from(e.entries()),"f"),ve(this,be,{...xe,...r},"f"),ve(this,ue,Se(this,me,"f").encode(Se(this,de,"f")),"f"),ve(this,pe,Se(this,ue,"f").byteLength,"f"),this.boundary=`form-data-boundary-${s}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,ve(this,ye,Se(this,me,"f").encode(`${Se(this,fe,"f")}${this.boundary}${Se(this,fe,"f")}${Se(this,de,"f").repeat(2)}`),"f");const n={"Content-Type":this.contentType},o=Se(this,le,"m",we).call(this);var i;o&&(this.contentLength=o,n["Content-Length"]=o),this.headers=(i=Object.freeze(n),new Proxy(i,{get:(e,t)=>ae(e,t),has:(e,t)=>void 0!==ae(e,t)})),Object.defineProperties(this,{boundary:Ee,contentType:Ee,contentLength:Ee,headers:Ee})}getContentLength(){return null==this.contentLength?void 0:Number(this.contentLength)}*values(){for(const[e,t]of Se(this,ge,"f")){const r=he(t)?t:Se(this,me,"f").encode(oe(t));yield Se(this,le,"m",_e).call(this,e,r),yield r,yield Se(this,ue,"f")}yield Se(this,ye,"f")}async*encode(){for(const e of this.values())he(e)?yield*ne(e.stream()):yield e}[(de=new WeakMap,ue=new WeakMap,pe=new WeakMap,fe=new WeakMap,me=new WeakMap,ye=new WeakMap,ge=new WeakMap,be=new WeakMap,le=new WeakSet,_e=function(e,t){let r="";r+=`${Se(this,fe,"f")}${this.boundary}${Se(this,de,"f")}`,r+=`Content-Disposition: form-data; name="${ce(e)}"`,he(t)&&(r+=`; filename="${ce(t.name)}"${Se(this,de,"f")}`,r+=`Content-Type: ${t.type||"application/octet-stream"}`);const s=he(t)?t.size:t.byteLength;return!0!==Se(this,be,"f").enableAdditionalHeaders||null==s||isNaN(s)||(r+=`${Se(this,de,"f")}Content-Length: ${he(t)?t.size:t.byteLength}`),Se(this,me,"f").encode(`${r}${Se(this,de,"f").repeat(2)}`)},we=function(){let e=0;for(const[t,r]of Se(this,ge,"f")){const s=he(r)?r:Se(this,me,"f").encode(oe(r)),n=he(s)?s.size:s.byteLength;if(null==n||isNaN(n))return;e+=Se(this,le,"m",_e).call(this,t,s).byteLength,e+=n,e+=Se(this,pe,"f")}return String(e+Se(this,ye,"f").byteLength)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}}const Te=require("node:util");function Oe(e){return b.nodeStream(e)&&b.function_(e.getBoundary)}function Pe(e,t,r){const s={};for(const n of r){const r=(...e)=>{t.emit(n,...e)};s[n]=r,e.on(n,r)}return()=>{for(const[t,r]of Object.entries(s))e.off(t,r)}}const ke=require("node:net"),Re=Symbol("reentry"),Ae=()=>{};class Ie extends Error{constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.code="ETIMEDOUT"}}const je=({attemptCount:e,retryOptions:t,error:r,retryAfter:s,computedValue:n})=>{if("RetryError"===r.name)return 1;if(e>t.limit)return 0;const o=t.methods.includes(r.options.method),i=t.errorCodes.includes(r.code),a=r.response&&t.statusCodes.includes(r.response.statusCode);if(!o||!i&&!a)return 0;if(r.response){if(s)return s>n?0:s;if(413===r.response.statusCode)return 0}const c=Math.random()*t.noise;return Math.min(2**(e-1)*1e3,t.backoffLimit)+c},Le=require("node:tls"),He=require("node:https"),qe=require("node:dns"),{Resolver:Ne}=qe.promises,Ue=Symbol("cacheableLookupCreateConnection"),$e=Symbol("cacheableLookupInstance"),De=Symbol("expires"),Me="number"==typeof qe.ALL,Be=e=>{if(!e||"function"!=typeof e.createConnection)throw new Error("Expected an Agent instance as the first argument")},ze=()=>{let e=!1,r=!1;for(const s of Object.values(t.networkInterfaces()))for(const t of s)if(!t.internal&&("IPv6"===t.family?r=!0:e=!0,e&&r))return{has4:e,has6:r};return{has4:e,has6:r}},Ge=e=>e.catch((e=>{if("ENODATA"===e.code||"ENOTFOUND"===e.code||"ENOENT"===e.code)return[];throw e})),Fe={ttl:!0},We={all:!0},Ve={all:!0,family:4},Je={all:!0,family:6};class Ke{constructor({cache:e=new Map,maxTtl:t=1/0,fallbackDuration:r=3600,errorTtl:s=.15,resolver:n=new Ne,lookup:o=qe.lookup}={}){if(this.maxTtl=t,this.errorTtl=s,this._cache=e,this._resolver=n,this._dnsLookup=o&&(0,Te.promisify)(o),this.stats={cache:0,query:0},this._resolver instanceof Ne?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=(0,Te.promisify)(this._resolver.resolve4.bind(this._resolver)),this._resolve6=(0,Te.promisify)(this._resolver.resolve6.bind(this._resolver))),this._iface=ze(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=r,r>0){const e=setInterval((()=>{this._hostnamesToFallback.clear()}),1e3*r);e.unref&&e.unref(),this._fallbackInterval=e}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,t,r){if("function"==typeof t?(r=t,t={}):"number"==typeof t&&(t={family:t}),!r)throw new Error("Callback must be a function.");this.lookupAsync(e,t).then((e=>{t.all?r(null,e):r(null,e.address,e.family,e.expires,e.ttl,e.source)}),r)}async lookupAsync(e,t={}){"number"==typeof t&&(t={family:t});let r=await this.query(e);if(6===t.family){const e=r.filter((e=>6===e.family));t.hints&qe.V4MAPPED&&(Me&&t.hints&qe.ALL||0===e.length)?(e=>{for(const t of e)6!==t.family&&(t.address=`::ffff:${t.address}`,t.family=6)})(r):r=e}else 4===t.family&&(r=r.filter((e=>4===e.family)));if(t.hints&qe.ADDRCONFIG){const{_iface:e}=this;r=r.filter((t=>6===t.family?e.has6:e.has4))}if(0===r.length){const t=new Error(`cacheableLookup ENOTFOUND ${e}`);throw t.code="ENOTFOUND",t.hostname=e,t}return t.all?r:r[0]}async query(e){let t="cache",r=await this._cache.get(e);if(r&&this.stats.cache++,!r){const s=this._pending[e];if(s)this.stats.cache++,r=await s;else{t="query";const s=this.queryAndCache(e);this._pending[e]=s,this.stats.query++;try{r=await s}finally{delete this._pending[e]}}}return r=r.map((e=>({...e,source:t}))),r}async _resolve(e){const[t,r]=await Promise.all([Ge(this._resolve4(e,Fe)),Ge(this._resolve6(e,Fe))]);let s=0,n=0,o=0;const i=Date.now();for(const e of t)e.family=4,e.expires=i+1e3*e.ttl,s=Math.max(s,e.ttl);for(const e of r)e.family=6,e.expires=i+1e3*e.ttl,n=Math.max(n,e.ttl);return o=t.length>0?r.length>0?Math.min(s,n):s:n,{entries:[...t,...r],cacheTtl:o}}async _lookup(e){try{const[t,r]=await Promise.all([Ge(this._dnsLookup(e,Ve)),Ge(this._dnsLookup(e,Je))]);return{entries:[...t,...r],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,t,r){if(this.maxTtl>0&&r>0){r=1e3*Math.min(r,this.maxTtl),t[De]=Date.now()+r;try{await this._cache.set(e,t,r)}catch(e){this.lookupAsync=async()=>{const t=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw t.cause=e,t}}s=this._cache,Symbol.iterator in s&&this._tick(r)}var s}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,We);let t=await this._resolve(e);0===t.entries.length&&this._dnsLookup&&(t=await this._lookup(e),0!==t.entries.length&&this.fallbackDuration>0&&this._hostnamesToFallback.add(e));const r=0===t.entries.length?this.errorTtl:t.cacheTtl;return await this._set(e,t.entries,r),t.entries}_tick(e){const t=this._nextRemovalTime;(!t||e<t)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout((()=>{this._nextRemovalTime=!1;let e=1/0;const t=Date.now();for(const[r,s]of this._cache){const n=s[De];t>=n?this._cache.delete(r):n<e&&(e=n)}e!==1/0&&this._tick(e-t)}),e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(Be(e),Ue in e)throw new Error("CacheableLookup has been already installed");e[Ue]=e.createConnection,e[$e]=this,e.createConnection=(t,r)=>("lookup"in t||(t.lookup=this.lookup),e[Ue](t,r))}uninstall(e){if(Be(e),e[Ue]){if(e[$e]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[Ue],delete e[Ue],delete e[$e]}}updateInterfaceInfo(){const{_iface:e}=this;this._iface=ze(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){e?this._cache.delete(e):this._cache.clear()}}var Qe=r(5769);const[Ye,Xe]=A.versions.node.split(".").map(Number),Ze=new Map;let et;const tt={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform:e=>"json"===e.request.options.responseType?e.body:JSON.parse(e.body),paginate({response:e}){const t=e.headers.link;if("string"!=typeof t||""===t.trim())return!1;const r=function(e){const t=[],r=e.split(",");for(const s of r){const[r,...n]=s.split(";"),o=r.trim();if("<"!==o[0]||">"!==o[o.length-1])throw new Error(`Invalid format of the Link header reference: ${o}`);const i=o.slice(1,-1),a={};if(0===n.length)throw new Error(`Unexpected end of Link header parameters: ${n.join(";")}`);for(const t of n){const r=t.trim(),s=r.indexOf("=");if(-1===s)throw new Error(`Failed to parse Link header: ${e}`);const n=r.slice(0,s).trim(),o=r.slice(s+1).trim();a[n]=o}t.push({reference:i,parameters:a})}return t}(t).find((e=>"next"===e.parameters.rel||'"next"'===e.parameters.rel));return!!r&&{url:new L.URL(r.reference,e.url)}},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!0},rt=e=>{const t=[e.timeout.socket,e.timeout.connect,e.timeout.lookup,e.timeout.request,e.timeout.secureConnect].filter((e=>"number"==typeof e));if(t.length>0)return Math.min(...t)},st=(e,t,r)=>{const s=e.hooks?.init;if(s)for(const e of s)e(t,r)};class nt{constructor(e,t,r){if(Object.defineProperty(this,"_unixOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_internals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_merging",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_init",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),g.any([b.string,b.urlInstance,b.object,b.undefined],e),g.any([b.object,b.undefined],t),g.any([b.object,b.undefined],r),e instanceof nt||t instanceof nt)throw new TypeError("The defaults must be passed as the third argument");this._internals=(e=>{const{hooks:t,retry:r}=e,s={...e,context:{...e.context},cacheOptions:{...e.cacheOptions},https:{...e.https},agent:{...e.agent},headers:{...e.headers},retry:{...r,errorCodes:[...r.errorCodes],methods:[...r.methods],statusCodes:[...r.statusCodes]},timeout:{...e.timeout},hooks:{init:[...t.init],beforeRequest:[...t.beforeRequest],beforeError:[...t.beforeError],beforeRedirect:[...t.beforeRedirect],beforeRetry:[...t.beforeRetry],afterResponse:[...t.afterResponse]},searchParams:e.searchParams?new L.URLSearchParams(e.searchParams):void 0,pagination:{...e.pagination}};return void 0!==s.url&&(s.prefixUrl=""),s})(r?._internals??r??tt),this._init=[...r?._init??[]],this._merging=!1,this._unixOptions=void 0;try{if(b.plainObject(e))try{this.merge(e),this.merge(t)}finally{this.url=e.url}else try{this.merge(t)}finally{if(void 0!==t?.url){if(void 0!==e)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");this.url=t.url}else void 0!==e&&(this.url=e)}}catch(e){throw e.options=this,e}}merge(e){if(e)if(e instanceof nt)for(const t of e._init)this.merge(t);else{e=(e=>{const{hooks:t,retry:r}=e,s={...e};return b.object(e.context)&&(s.context={...e.context}),b.object(e.cacheOptions)&&(s.cacheOptions={...e.cacheOptions}),b.object(e.https)&&(s.https={...e.https}),b.object(e.cacheOptions)&&(s.cacheOptions={...s.cacheOptions}),b.object(e.agent)&&(s.agent={...e.agent}),b.object(e.headers)&&(s.headers={...e.headers}),b.object(r)&&(s.retry={...r},b.array(r.errorCodes)&&(s.retry.errorCodes=[...r.errorCodes]),b.array(r.methods)&&(s.retry.methods=[...r.methods]),b.array(r.statusCodes)&&(s.retry.statusCodes=[...r.statusCodes])),b.object(e.timeout)&&(s.timeout={...e.timeout}),b.object(t)&&(s.hooks={...t},b.array(t.init)&&(s.hooks.init=[...t.init]),b.array(t.beforeRequest)&&(s.hooks.beforeRequest=[...t.beforeRequest]),b.array(t.beforeError)&&(s.hooks.beforeError=[...t.beforeError]),b.array(t.beforeRedirect)&&(s.hooks.beforeRedirect=[...t.beforeRedirect]),b.array(t.beforeRetry)&&(s.hooks.beforeRetry=[...t.beforeRetry]),b.array(t.afterResponse)&&(s.hooks.afterResponse=[...t.afterResponse])),b.object(e.pagination)&&(s.pagination={...e.pagination}),s})(e),st(this,e,this),st(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let t=!1;for(const r in e)if("mutableDefaults"!==r&&"handlers"!==r&&"url"!==r){if(!(r in this))throw new Error(`Unexpected option: ${r}`);this[r]=e[r],t=!0}t&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){g.any([b.function_,b.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){g.plainObject(e);for(const t in e){if(!(t in this._internals.agent))throw new TypeError(`Unexpected agent option: ${t}`);g.any([b.object,b.undefined],e[t])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent={...e}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){g.boolean(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){g.plainObject(e);for(const t in e){if(!(t in this._internals.timeout))throw new Error(`Unexpected timeout option: ${t}`);g.any([b.number,b.undefined],e[t])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout={...e}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(g.any([b.string,b.urlInstance],e),""!==e){if((e=e.toString()).endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){const{href:t}=this._internals.url;this._internals.url.href=e+t.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}else this._internals.prefixUrl=""}get body(){return this._internals.body}set body(e){g.any([b.string,b.buffer,b.nodeStream,b.generator,b.asyncGenerator,se,b.undefined],e),b.nodeStream(e)&&g.truthy(e.readable),void 0!==e&&(g.undefined(this._internals.form),g.undefined(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){g.any([b.plainObject,b.undefined],e),void 0!==e&&(g.undefined(this._internals.body),g.undefined(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){void 0!==e&&(g.undefined(this._internals.body),g.undefined(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(g.any([b.string,b.urlInstance,b.undefined],e),void 0===e)return void(this._internals.url=void 0);if(b.string(e)&&e.startsWith("/"))throw new Error("`url` must not start with a slash");const t=`${this.prefixUrl}${e.toString()}`,r=new L.URL(t);if(this._internals.url=r,"unix:"===r.protocol&&(r.href=`http://unix${r.pathname}${r.search}`),"http:"!==r.protocol&&"https:"!==r.protocol){const e=new Error(`Unsupported protocol: ${r.protocol}`);throw e.code="ERR_UNSUPPORTED_PROTOCOL",e}if(this._internals.username&&(r.username=this._internals.username,this._internals.username=""),this._internals.password&&(r.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(r.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),"unix"!==r.hostname)this._unixOptions=void 0;else{if(!this._internals.enableUnixSockets)throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");const e=/(?<socketPath>.+?):(?<path>.+)/.exec(`${r.pathname}${r.search}`);if(e?.groups){const{socketPath:t,path:r}=e.groups;this._unixOptions={socketPath:t,path:r,host:""}}else this._unixOptions=void 0}}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(g.any([b.object,b.undefined],e),void 0===e)return void(this._internals.cookieJar=void 0);let{setCookie:t,getCookieString:r}=e;g.function_(t),g.function_(r),4===t.length&&0===r.length?(t=(0,Te.promisify)(t.bind(e)),r=(0,Te.promisify)(r.bind(e)),this._internals.cookieJar={setCookie:t,getCookieString:r}):this._internals.cookieJar=e}get signal(){return this._internals.signal}set signal(e){g.object(e),this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){g.boolean(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(void 0===this._internals.searchParams&&(this._internals.searchParams=new L.URLSearchParams),this._internals.searchParams)}set searchParams(e){g.any([b.string,b.object,b.undefined],e);const t=this._internals.url;if(void 0===e)return this._internals.searchParams=void 0,void(t&&(t.search=""));const r=this.searchParams;let s;if(b.string(e))s=new L.URLSearchParams(e);else if(e instanceof L.URLSearchParams)s=e;else{!function(e){for(const t in e){const r=e[t];g.any([b.string,b.number,b.boolean,b.null_,b.undefined],r)}}(e),s=new L.URLSearchParams;for(const t in e){const n=e[t];null===n?s.append(t,""):void 0===n?r.delete(t):s.append(t,n)}}if(this._merging){for(const e of s.keys())r.delete(e);for(const[e,t]of s)r.append(e,t)}else t?t.search=r.toString():this._internals.searchParams=r}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){g.any([b.function_,b.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){g.any([b.object,b.boolean,b.undefined],e),this._internals.dnsCache=!0===e?et||(et=new Ke,et):!1===e?void 0:e}get context(){return this._internals.context}set context(e){g.object(e),this._merging?Object.assign(this._internals.context,e):this._internals.context={...e}}get hooks(){return this._internals.hooks}set hooks(e){g.object(e);for(const t in e){if(!(t in this._internals.hooks))throw new Error(`Unexpected hook event: ${t}`);const r=t,s=e[r];if(g.any([b.array,b.undefined],s),s)for(const e of s)g.function_(e);if(this._merging)s&&this._internals.hooks[r].push(...s);else{if(!s)throw new Error(`Missing hook event: ${t}`);this._internals.hooks[t]=[...s]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){g.boolean(e),this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){g.number(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){g.any([b.object,b.string,b.boolean,b.undefined],e),this._internals.cache=!0===e?Ze:!1===e?void 0:e}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){g.boolean(e),this._internals.throwHttpErrors=e}get username(){const e=this._internals.url,t=e?e.username:this._internals.username;return decodeURIComponent(t)}set username(e){g.string(e);const t=this._internals.url,r=encodeURIComponent(e);t?t.username=r:this._internals.username=r}get password(){const e=this._internals.url,t=e?e.password:this._internals.password;return decodeURIComponent(t)}set password(e){g.string(e);const t=this._internals.url,r=encodeURIComponent(e);t?t.password=r:this._internals.password=r}get http2(){return this._internals.http2}set http2(e){g.boolean(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){g.boolean(e),this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){g.plainObject(e),this._merging?Object.assign(this._internals.headers,G(e)):this._internals.headers=G(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){g.boolean(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(void 0!==e&&4!==e&&6!==e)throw new TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){g.function_(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){g.function_(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(g.plainObject(e),g.any([b.function_,b.undefined],e.calculateDelay),g.any([b.number,b.undefined],e.maxRetryAfter),g.any([b.number,b.undefined],e.limit),g.any([b.array,b.undefined],e.methods),g.any([b.array,b.undefined],e.statusCodes),g.any([b.array,b.undefined],e.errorCodes),g.any([b.number,b.undefined],e.noise),e.noise&&Math.abs(e.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(const t in e)if(!(t in this._internals.retry))throw new Error(`Unexpected retry option: ${t}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry={...e};const{retry:t}=this._internals;t.methods=[...new Set(t.methods.map((e=>e.toUpperCase())))],t.statusCodes=[...new Set(t.statusCodes)],t.errorCodes=[...new Set(t.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){g.any([b.string,b.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){g.string(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){g.any([b.function_,b.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){g.plainObject(e),g.any([b.boolean,b.undefined],e.shared),g.any([b.number,b.undefined],e.cacheHeuristic),g.any([b.number,b.undefined],e.immutableMinTimeToLive),g.any([b.boolean,b.undefined],e.ignoreCargoCult);for(const t in e)if(!(t in this._internals.cacheOptions))throw new Error(`Cache option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions={...e}}get https(){return this._internals.https}set https(e){g.plainObject(e),g.any([b.boolean,b.undefined],e.rejectUnauthorized),g.any([b.function_,b.undefined],e.checkServerIdentity),g.any([b.string,b.object,b.array,b.undefined],e.certificateAuthority),g.any([b.string,b.object,b.array,b.undefined],e.key),g.any([b.string,b.object,b.array,b.undefined],e.certificate),g.any([b.string,b.undefined],e.passphrase),g.any([b.string,b.buffer,b.array,b.undefined],e.pfx),g.any([b.array,b.undefined],e.alpnProtocols),g.any([b.string,b.undefined],e.ciphers),g.any([b.string,b.buffer,b.undefined],e.dhparam),g.any([b.string,b.undefined],e.signatureAlgorithms),g.any([b.string,b.undefined],e.minVersion),g.any([b.string,b.undefined],e.maxVersion),g.any([b.boolean,b.undefined],e.honorCipherOrder),g.any([b.number,b.undefined],e.tlsSessionLifetime),g.any([b.string,b.undefined],e.ecdhCurve),g.any([b.string,b.buffer,b.array,b.undefined],e.certificateRevocationLists);for(const t in e)if(!(t in this._internals.https))throw new Error(`HTTPS option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https={...e}}get encoding(){return this._internals.encoding}set encoding(e){if(null===e)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");g.any([b.string,b.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){g.boolean(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){g.boolean(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(void 0!==e){if("text"!==e&&"buffer"!==e&&"json"!==e)throw new Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}else this._internals.responseType="text"}get pagination(){return this._internals.pagination}set pagination(e){g.object(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){g.boolean(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){g.any([b.number,b.undefined],e),this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){g.boolean(e),this._internals.enableUnixSockets=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,t){return(0,Te.inspect)(this._internals,t)}createNativeRequestOptions(){const e=this._internals;let t;t="https:"===e.url.protocol?e.http2?e.agent:e.agent.https:e.agent.http;const{https:r}=e;let{pfx:s}=r;return b.array(s)&&b.plainObject(s[0])&&(s=s.map((e=>({buf:e.buffer,passphrase:e.passphrase})))),{...e.cacheOptions,...this._unixOptions,ALPNProtocols:r.alpnProtocols,ca:r.certificateAuthority,cert:r.certificate,key:r.key,passphrase:r.passphrase,pfx:r.pfx,rejectUnauthorized:r.rejectUnauthorized,checkServerIdentity:r.checkServerIdentity??Le.checkServerIdentity,ciphers:r.ciphers,honorCipherOrder:r.honorCipherOrder,minVersion:r.minVersion,maxVersion:r.maxVersion,sigalgs:r.signatureAlgorithms,sessionTimeout:r.tlsSessionLifetime,dhparam:r.dhparam,ecdhCurve:r.ecdhCurve,crl:r.certificateRevocationLists,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:t,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?rt(e):void 0,h2session:e.h2session}}getRequestFunction(){const e=this._internals.url,{request:t}=this._internals;return!t&&e?this.getFallbackRequestFunction():t}getFallbackRequestFunction(){const e=this._internals.url;if(e){if("https:"===e.protocol){if(this._internals.http2){if(Ye<15||15===Ye&&Xe<10){const e=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw e.code="EUNSUPPORTED",e}return Qe.auto}return He.request}return H.request}}freeze(){const e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes)}}const ot=e=>{const{statusCode:t}=e,r=e.request.options.followRedirect?299:399;return t>=200&&t<=r||304===t};class it extends S{constructor(e,t){const{options:r}=t.request;super(`${e.message} in "${r.url.toString()}"`,e,t.request),this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}}const at=(e,t,r,s)=>{const{rawBody:n}=e;try{if("text"===t)return n.toString(s);if("json"===t)return 0===n.length?"":r(n.toString(s));if("buffer"===t)return n}catch(t){throw new it(t,e)}throw new it({message:`Unknown body type '${t}'`,name:"Error"},e)};function ct(e){return"unix:"===e.protocol||"unix"===e.hostname}const{buffer:ht}=B,lt=b.string(A.versions.brotli),dt=new Set(["GET","HEAD"]),ut=new class{constructor(){Object.defineProperty(this,"weakMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.weakMap=new WeakMap,this.map=new Map}set(e,t){"object"==typeof e?this.weakMap.set(e,t):this.map.set(e,t)}get(e){return"object"==typeof e?this.weakMap.get(e):this.map.get(e)}has(e){return"object"==typeof e?this.weakMap.has(e):this.map.has(e)}},pt=new Set([300,301,302,303,304,307,308]),ft=["socket","connect","continue","information","upgrade"],mt=()=>{};class yt extends j.Duplex{constructor(e,t,r){super({autoDestroy:!1,highWaterMark:0}),Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_noPipe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"redirectUrls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopRetry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downloadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_uploadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopReading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pipedServerResponses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_responseSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bodySize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_unproxyEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isFromCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cannotHaveBody",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_triggerRead",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cancelTimeouts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_removeListeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nativeResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_flushed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_aborted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_requestInitialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=mt,this._triggerRead=!1,this._cancelTimeouts=mt,this._removeListeners=mt,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=mt,this.on("pipe",(e=>{e?.headers&&Object.assign(this.options.headers,e.headers)})),this.on("newListener",(e=>{if("retry"===e&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")}));try{if(this.options=new nt(e,t,r),!this.options.url){if(""===this.options.prefixUrl)throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(e){const{options:t}=e;return t&&(this.options=t),void(this.flush=async()=>{this.flush=async()=>{},this.destroy(e)})}const{body:s}=this.options;if(b.nodeStream(s)&&s.once("error",(e=>{this._flushed?this._beforeError(new T(e,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new T(e,this))}})),this.options.signal){const e=()=>{this.destroy(new R(this))};this.options.signal.aborted?e():(this.options.signal.addEventListener("abort",e),this._removeListeners=()=>{this.options.signal.removeEventListener("abort",e)})}}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed)return void this._request?.destroy();for(const e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0}catch(e){this._beforeError(e)}}}_beforeError(e){if(this._stopReading)return;const{response:t,options:r}=this,s=this.retryCount+("RetryError"===e.name?0:1);this._stopReading=!0,e instanceof S||(e=new S(e.message,e,this));const n=e;(async()=>{if(!t?.readable||t.rawBody||this._request?.socket?.destroyed||(t.setEncoding(this.readableEncoding),await this._setRawBody(t)&&(t.body=t.rawBody.toString())),0!==this.listenerCount("retry")){let o;try{let e;t&&"retry-after"in t.headers&&(e=Number(t.headers["retry-after"]),Number.isNaN(e)?(e=Date.parse(t.headers["retry-after"])-Date.now(),e<=0&&(e=1)):e*=1e3);const i=r.retry;o=await i.calculateDelay({attemptCount:s,retryOptions:i,error:n,retryAfter:e,computedValue:je({attemptCount:s,retryOptions:i,error:n,retryAfter:e,computedValue:i.maxRetryAfter??r.timeout.request??Number.POSITIVE_INFINITY})})}catch(e){return void this._error(new S(e.message,e,this))}if(o){if(await new Promise((e=>{const t=setTimeout(e,o);this._stopRetry=()=>{clearTimeout(t),e()}})),this.destroyed)return;try{for(const e of this.options.hooks.beforeRetry)await e(n,this.retryCount+1)}catch(t){return void this._error(new S(t.message,e,this))}if(this.destroyed)return;return this.destroy(),void this.emit("retry",this.retryCount+1,e,(e=>{const t=new yt(r.url,e,r);return t.retryCount=this.retryCount+1,A.nextTick((()=>{t.flush()})),t}))}}this._error(n)})()}_read(){this._triggerRead=!0;const{response:e}=this;if(e&&!this._stopReading){let t;for(e.readableLength&&(this._triggerRead=!1);null!==(t=e.read());){this._downloadedSize+=t.length;const e=this.downloadProgress;e.percent<1&&this.emit("downloadProgress",e),this.push(t)}}}_write(e,t,r){const s=()=>{this._writeRequest(e,t,r)};this._requestInitialized?s():this._jobs.push(s)}_final(e){const t=()=>{this._request&&!this._request.destroyed?this._request.end((t=>{this._request._writableState?.errored||(t||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request.emit("upload-complete")),e(t))})):e()};this._requestInitialized?t():this._jobs.push(t)}_destroy(e,t){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this._removeListeners(),this.options){const{body:e}=this.options;b.nodeStream(e)&&e.destroy()}this._request&&this._request.destroy(),null===e||b.undefined(e)||e instanceof S||(e=new S(e.message,e,this)),t(e)}pipe(e,t){return e instanceof H.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,t)}unpipe(e){return e instanceof H.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this}async _finalizeBody(){const{options:e}=this,{headers:t}=e,r=!b.undefined(e.form),s=!b.undefined(e.json),n=!b.undefined(e.body),o=dt.has(e.method)&&!("GET"===e.method&&e.allowGetBody);if(this._cannotHaveBody=o,r||s||n){if(o)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);const s=!b.string(t["content-type"]);if(n){if(se(e.body)){const r=new Ce(e.body);s&&(t["content-type"]=r.headers["Content-Type"]),"Content-Length"in r.headers&&(t["content-length"]=r.headers["Content-Length"]),e.body=r.encode()}Oe(e.body)&&s&&(t["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(r){s&&(t["content-type"]="application/x-www-form-urlencoded");const{form:r}=e;e.form=void 0,e.body=new L.URLSearchParams(r).toString()}else{s&&(t["content-type"]="application/json");const{json:r}=e;e.json=void 0,e.body=e.stringifyJson(r)}const i=await async function(e,t){return t&&"content-length"in t?Number(t["content-length"]):e?b.string(e)?I.Buffer.byteLength(e):b.buffer(e)?e.length:Oe(e)?(0,Te.promisify)(e.getLength.bind(e))():void 0:0}(e.body,e.headers);b.undefined(t["content-length"])&&b.undefined(t["transfer-encoding"])&&!o&&!b.undefined(i)&&(t["content-length"]=String(i))}"json"!==e.responseType||"accept"in e.headers||(e.headers.accept="application/json"),this._bodySize=Number(t["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;const{options:t}=this,{url:r}=t;this._nativeResponse=e,t.decompress&&(e=te(e));const s=e.statusCode,n=e;n.statusMessage=n.statusMessage??H.STATUS_CODES[s],n.url=t.url.toString(),n.requestUrl=this.requestUrl,n.redirectUrls=this.redirectUrls,n.request=this,n.isFromCache=this._nativeResponse.fromCache??!1,n.ip=this.ip,n.retryCount=this.retryCount,n.ok=ot(n),this._isFromCache=n.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=n,e.once("end",(()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)})),e.once("error",(t=>{this._aborted=!0,e.destroy(),this._beforeError(new P(t,this))})),e.once("aborted",(()=>{this._aborted=!0,this._beforeError(new P({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))})),this.emit("downloadProgress",this.downloadProgress);const o=e.headers["set-cookie"];if(b.object(t.cookieJar)&&o){let e=o.map((async e=>t.cookieJar.setCookie(e,r.toString())));t.ignoreInvalidCookies&&(e=e.map((async e=>{try{await e}catch{}})));try{await Promise.all(e)}catch(e){return void this._beforeError(e)}}if(!this.isAborted)if(t.followRedirect&&e.headers.location&&pt.has(s)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=t.maxRedirects)return void this._beforeError(new x(this));this._request=void 0;const o=new nt(void 0,void 0,this.options),i=303===s&&"GET"!==o.method&&"HEAD"!==o.method,a=307!==s&&308!==s,c=o.methodRewriting&&a;(i||c)&&(o.method="GET",o.body=void 0,o.json=void 0,o.form=void 0,delete o.headers["content-length"]);try{const t=I.Buffer.from(e.headers.location,"binary").toString(),s=new L.URL(t,r);if(!ct(r)&&ct(s))return void this._beforeError(new S("Cannot redirect to UNIX socket",{},this));s.hostname!==r.hostname||s.port!==r.port?("host"in o.headers&&delete o.headers.host,"cookie"in o.headers&&delete o.headers.cookie,"authorization"in o.headers&&delete o.headers.authorization,(o.username||o.password)&&(o.username="",o.password="")):(s.username=o.username,s.password=o.password),this.redirectUrls.push(s),o.prefixUrl="",o.url=s;for(const e of o.hooks.beforeRedirect)await e(o,n);this.emit("redirect",o,n),this.options=o,await this._makeRequest()}catch(e){return void this._beforeError(e)}}else if(t.isStream&&t.throwHttpErrors&&!ot(n))this._beforeError(new E(n));else if(e.on("readable",(()=>{this._triggerRead&&this._read()})),this.on("resume",(()=>{e.resume()})),this.on("pause",(()=>{e.pause()})),e.once("end",(()=>{this.push(null)})),this._noPipe)await this._setRawBody()&&this.emit("response",e);else{this.emit("response",e);for(const r of this._pipedServerResponses)if(!r.headersSent){for(const s in e.headers){const n=!t.decompress||"content-encoding"!==s,o=e.headers[s];n&&r.setHeader(s,o)}r.statusCode=s}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{const t=await ht(e);if(!this.isAborted)return this.response.rawBody=t,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(e){this._beforeError(e)}}_onRequest(e){const{options:t}=this,{timeout:r,url:s}=t;(e=>{if(e.timings)return e.timings;const t={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=t;const r=e=>{e.once(q.errorMonitor,(()=>{t.error=Date.now(),t.phases.total=t.error-t.start}))};r(e);const s=()=>{t.abort=Date.now(),t.phases.total=t.abort-t.start};e.prependOnceListener("abort",s);const n=e=>{if(t.socket=Date.now(),t.phases.wait=t.socket-t.start,N.types.isProxy(e))return;const r=()=>{t.lookup=Date.now(),t.phases.dns=t.lookup-t.socket};e.prependOnceListener("lookup",r),U(e,{connect:()=>{t.connect=Date.now(),void 0===t.lookup&&(e.removeListener("lookup",r),t.lookup=t.connect,t.phases.dns=t.lookup-t.socket),t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now(),t.phases.tls=t.secureConnect-t.connect}})};e.socket?n(e.socket):e.prependOnceListener("socket",n);const o=()=>{t.upload=Date.now(),t.phases.request=t.upload-(t.secureConnect??t.connect)};e.writableFinished?o():e.prependOnceListener("finish",o),e.prependOnceListener("response",(n=>{t.response=Date.now(),t.phases.firstByte=t.response-t.upload,n.timings=t,r(n),n.prependOnceListener("end",(()=>{e.off("abort",s),n.off("aborted",s),t.phases.total||(t.end=Date.now(),t.phases.download=t.end-t.response,t.phases.total=t.end-t.start)})),n.prependOnceListener("aborted",s)}))})(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=function(e,t,r){if(Re in e)return Ae;e[Re]=!0;const s=[],{once:n,unhandleAll:o}=function(){const e=[];return{once(t,r,s){t.once(r,s),e.push({origin:t,event:r,fn:s})},unhandleAll(){for(const t of e){const{origin:e,event:r,fn:s}=t;e.removeListener(r,s)}e.length=0}}}(),i=(e,t,r)=>{const n=setTimeout(t,e,e,r);n.unref?.();const o=()=>{clearTimeout(n)};return s.push(o),o},{host:a,hostname:c}=r,h=(t,r)=>{e.destroy(new Ie(t,r))},l=()=>{for(const e of s)e();o()};if(e.once("error",(t=>{if(l(),0===e.listenerCount("error"))throw t})),void 0!==t.request){const r=i(t.request,h,"request");n(e,"response",(e=>{n(e,"end",r)}))}if(void 0!==t.socket){const{socket:r}=t,n=()=>{h(r,"socket")};e.setTimeout(r,n),s.push((()=>{e.removeListener("timeout",n)}))}const d=void 0!==t.lookup,u=void 0!==t.connect,p=void 0!==t.secureConnect,f=void 0!==t.send;return(d||u||p||f)&&n(e,"socket",(s=>{const{socketPath:o}=e;if(s.connecting){const e=Boolean(o??0!==ke.isIP(c??a??""));if(d&&!e&&void 0===s.address().address){const e=i(t.lookup,h,"lookup");n(s,"lookup",e)}if(u){const r=()=>i(t.connect,h,"connect");e?n(s,"connect",r()):n(s,"lookup",(e=>{null===e&&n(s,"connect",r())}))}p&&"https:"===r.protocol&&n(s,"connect",(()=>{const e=i(t.secureConnect,h,"secureConnect");n(s,"secureConnect",e)}))}if(f){const r=()=>i(t.send,h,"send");s.connecting?n(s,"connect",(()=>{n(e,"upload-complete",r())})):n(e,"upload-complete",r())}})),void 0!==t.response&&n(e,"upload-complete",(()=>{const r=i(t.response,h,"response");n(e,"response",r)})),void 0!==t.read&&n(e,"response",(e=>{const r=i(t.read,h,"read");n(e,"end",r)})),l}(e,r,s);const n=t.cache?"cacheableResponse":"response";e.once(n,(e=>{this._onResponse(e)})),e.once("error",(t=>{this._aborted=!0,e.destroy(),t=t instanceof Ie?new O(t,this.timings,this):new S(t.message,t,this),this._beforeError(t)})),this._unproxyEvents=Pe(e,this,ft),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise(((t,r)=>{super.write(e,(e=>{e?r(e):t()}))}))}_sendBody(){const{body:e}=this.options,t=0===this.redirectUrls.length?this:this._request??this;b.nodeStream(e)?e.pipe(t):b.generator(e)||b.asyncGenerator(e)?(async()=>{try{for await(const t of e)await this._asyncWrite(t);super.end()}catch(e){this._beforeError(e)}})():b.undefined(e)?(this._cannotHaveBody||this._noPipe)&&t.end():(this._writeRequest(e,void 0,(()=>{})),t.end())}_prepareCache(e){if(!ut.has(e)){const t=new ee(((e,t)=>{const r=e._request(e,t);return b.promise(r)&&(r.once=(e,t)=>{if("error"===e)(async()=>{try{await r}catch(e){t(e)}})();else{if("abort"!==e)throw new Error(`Unknown HTTP2 promise event: ${e}`);(async()=>{try{(await r).once("abort",t)}catch{}})()}return r}),r}),e);ut.set(e,t.request())}}async _createCacheableRequest(e,t){return new Promise(((r,s)=>{let n;Object.assign(t,function(e){const t={protocol:e.protocol,hostname:b.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return b.string(e.port)&&e.port.length>0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}(e));const o=ut.get(t.cache)(t,(async e=>{if(e._readableState.autoDestroy=!1,n){const t=()=>{e.req&&(e.complete=e.req.res.complete)};e.prependOnceListener("end",t),t(),(await n).emit("cacheableResponse",e)}r(e)}));o.once("error",s),o.once("request",(async e=>{n=e,r(n)}))}))}async _makeRequest(){const{options:e}=this,{headers:t,username:r,password:s}=e,n=e.cookieJar;for(const e in t)if(b.undefined(t[e]))delete t[e];else if(b.null_(t[e]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${e}\` header`);if(e.decompress&&b.undefined(t["accept-encoding"])&&(t["accept-encoding"]=lt?"gzip, deflate, br":"gzip, deflate"),r||s){const e=I.Buffer.from(`${r}:${s}`).toString("base64");t.authorization=`Basic ${e}`}if(n){const r=await n.getCookieString(e.url.toString());b.nonEmptyString(r)&&(t.cookie=r)}let o;e.prefixUrl="";for(const t of e.hooks.beforeRequest){const r=await t(e);if(!b.undefined(r)){o=()=>r;break}}o||(o=e.getRequestFunction());const i=e.url;this._requestOptions=e.createNativeRequestOptions(),e.cache&&(this._requestOptions._request=o,this._requestOptions.cache=e.cache,this._requestOptions.body=e.body,this._prepareCache(e.cache));const a=e.cache?this._createCacheableRequest:o;try{let t=a(i,this._requestOptions);b.promise(t)&&(t=await t),b.undefined(t)&&(t=e.getFallbackRequestFunction()(i,this._requestOptions),b.promise(t)&&(t=await t)),(c=t).writable&&!c.writableEnded?this._onRequest(t):this.writable?(this.once("finish",(()=>{this._onResponse(t)})),this._sendBody()):this._onResponse(t)}catch(e){if(e instanceof K)throw new C(e,this);throw e}var c}async _error(e){try{if(e instanceof E&&!this.options.throwHttpErrors);else for(const t of this.options.hooks.beforeError)e=await t(e)}catch(t){e=new S(t.message,t,this)}this.destroy(e)}_writeRequest(e,t,r){this._request&&!this._request.destroyed&&this._request.write(e,t,(s=>{if(!s&&!this._request.destroyed){this._uploadedSize+=I.Buffer.byteLength(e,t);const r=this.uploadProgress;r.percent<1&&this.emit("uploadProgress",r)}r(s)}))}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){let e;return e=this._responseSize?this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?1:0,{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;return e=this._bodySize?this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?1:0,{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}}class gt extends S{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}}const bt=["request","response","redirect","uploadProgress","downloadProgress"];function _t(e){let t,r,s;const n=new _.EventEmitter,o=new v(((i,a,c)=>{c((()=>{t.destroy()})),c.shouldReject=!1,c((()=>{a(new gt(t))}));const h=l=>{c((()=>{}));const d=e??new yt(void 0,void 0,s);d.retryCount=l,d._noPipe=!0,t=d,d.once("response",(async e=>{const t=(e.headers["content-encoding"]??"").toLowerCase(),s="gzip"===t||"deflate"===t||"br"===t,{options:n}=d;if(s&&!n.decompress)e.body=e.rawBody;else try{e.body=at(e,n.responseType,n.parseJson,n.encoding)}catch(t){if(e.body=e.rawBody.toString(),ot(e))return void d._beforeError(t)}try{const t=n.hooks.afterResponse;for(const[r,s]of t.entries())if(e=await s(e,(async e=>{throw n.merge(e),n.prefixUrl="",e.url&&(n.url=e.url),n.hooks.afterResponse=n.hooks.afterResponse.slice(0,r),new k(d)})),!b.object(e)||!b.number(e.statusCode)||b.nullOrUndefined(e.body))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(e){return void d._beforeError(e)}r=e,ot(e)?(d.destroy(),i(d.options.resolveBodyOnly?e.body:e)):d._beforeError(new E(e))}));const u=e=>{if(o.isCanceled)return;const{options:t}=d;if(e instanceof E&&!t.throwHttpErrors){const{response:t}=e;return d.destroy(),void i(d.options.resolveBodyOnly?t.body:t)}a(e)};d.once("error",u);const p=d.options?.body;d.once("retry",((t,r)=>{e=void 0;const n=d.options.body;if(p===n&&b.nodeStream(n))return r.message="Cannot retry with consumed body stream",void u(r);s=d.options,h(t)})),Pe(d,n,bt),b.undefined(e)&&d.flush()};h(0)}));o.on=(e,t)=>(n.on(e,t),o),o.off=(e,t)=>(n.off(e,t),o);const i=e=>{const t=(async()=>{await o;const{options:t}=r.request;return at(r,e,t.parseJson,t.encoding)})();return Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)),t};return o.json=()=>{if(t.options){const{headers:e}=t.options;t.writableFinished||"accept"in e||(e.accept="application/json")}return i("json")},o.buffer=()=>i("buffer"),o.text=()=>i("text"),o}const wt=async e=>new Promise((t=>{setTimeout(t,e)})),vt=e=>b.function_(e),St=["get","post","put","patch","head","delete"],xt=e=>{e={options:new nt(void 0,void 0,e.options),handlers:[...e.handlers],mutableDefaults:e.mutableDefaults},Object.defineProperty(e,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});const t=(t,r,s=e.options)=>{const n=new yt(t,r,s);let o;const i=e=>(n.options=e,n._noPipe=!e.isStream,n.flush(),e.isStream?n:(o||(o=_t(n)),o));let a=0;const c=t=>{const r=(e.handlers[a++]??i)(t,c);if(b.promise(r)&&!n.options.isStream&&(o||(o=_t(n)),r!==o)){const e=Object.getOwnPropertyDescriptors(o);for(const t in e)t in r&&delete e[t];Object.defineProperties(r,e),r.cancel=o.cancel}return r};return c(n.options)};t.extend=(...t)=>{const r=new nt(void 0,void 0,e.options),s=[...e.handlers];let n;for(const e of t)vt(e)?(r.merge(e.defaults.options),s.push(...e.defaults.handlers),n=e.defaults.mutableDefaults):(r.merge(e),e.handlers&&s.push(...e.handlers),n=e.mutableDefaults);return xt({options:r,handlers:s,mutableDefaults:Boolean(n)})};const r=async function*(r,s){let n=new nt(r,s,e.options);n.resolveBodyOnly=!1;const{pagination:o}=n;g.function_(o.transform),g.function_(o.shouldContinue),g.function_(o.filter),g.function_(o.paginate),g.number(o.countLimit),g.number(o.requestLimit),g.number(o.backoff);const i=[];let{countLimit:a}=o,c=0;for(;c<o.requestLimit;){0!==c&&await wt(o.backoff);const e=await t(void 0,void 0,n),r=await o.transform(e),s=[];g.array(r);for(const e of r)if(o.filter({item:e,currentItems:s,allItems:i})){if(!o.shouldContinue({item:e,currentItems:s,allItems:i}))return;if(yield e,o.stackAllItems&&i.push(e),s.push(e),--a<=0)return}const h=o.paginate({response:e,currentItems:s,allItems:i});if(!1===h)return;h===e.request.options?n=e.request.options:(n.merge(h),g.any([b.urlInstance,b.undefined],h.url),void 0!==h.url&&(n.prefixUrl="",n.url=h.url)),c++}};(t.paginate=r).all=async(e,t)=>{const s=[];for await(const n of r(e,t))s.push(n);return s},t.paginate.each=r,t.stream=(e,r)=>t(e,{...r,isStream:!0});for(const e of St)t[e]=(r,s)=>t(r,{...s,method:e}),t.stream[e]=(r,s)=>t(r,{...s,method:e,isStream:!0});return e.mutableDefaults||(Object.freeze(e.handlers),e.options.freeze()),Object.defineProperty(t,"defaults",{value:e,writable:!1,configurable:!1,enumerable:!0}),t},Et=xt({options:new nt,handlers:[],mutableDefaults:!1}),Ct=new Map([[24,["Sequoia","15"]],[23,["Sonoma","14"]],[22,["Ventura","13"]],[21,["Monterey","12"]],[20,["Big Sur","11"]],[19,["Catalina","10.15"]],[18,["Mojave","10.14"]],[17,["High Sierra","10.13"]],[16,["Sierra","10.12"]],[15,["El Capitan","10.11"]],[14,["Yosemite","10.10"]],[13,["Mavericks","10.9"]],[12,["Mountain Lion","10.8"]],[11,["Lion","10.7"]],[10,["Snow Leopard","10.6"]],[9,["Leopard","10.5"]],[8,["Tiger","10.4"]],[7,["Panther","10.3"]],[6,["Jaguar","10.2"]],[5,["Puma","10.1"]]]);var Tt=r(2779);const Ot=new Map([["10.0.2","11"],["10.0","10"],["6.3","8.1"],["6.2","8"],["6.1","7"],["6.0","Vista"],["5.2","Server 2003"],["5.1","XP"],["5.0","2000"],["4.90","ME"],["4.10","98"],["4.03","95"],["4.00","95"]]);const Pt=require("crypto");var kt=r.n(Pt);const Rt={randomUUID:kt().randomUUID},At=new Uint8Array(256);let It=At.length;function jt(){return It>At.length-16&&(kt().randomFillSync(At),It=0),At.slice(It,It+=16)}const Lt=[];for(let e=0;e<256;++e)Lt.push((e+256).toString(16).slice(1));const Ht=function(e,t,r){if(Rt.randomUUID&&!t&&!e)return Rt.randomUUID();const s=(e=e||{}).random||(e.rng||jt)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=s[e];return t}return function(e,t=0){return Lt[e[t+0]]+Lt[e[t+1]]+Lt[e[t+2]]+Lt[e[t+3]]+"-"+Lt[e[t+4]]+Lt[e[t+5]]+"-"+Lt[e[t+6]]+Lt[e[t+7]]+"-"+Lt[e[t+8]]+Lt[e[t+9]]+"-"+Lt[e[t+10]]+Lt[e[t+11]]+Lt[e[t+12]]+Lt[e[t+13]]+Lt[e[t+14]]+Lt[e[t+15]]}(s)},qt="fileAddedLine",Nt="fileCreated",Ut="fileEdited",$t="fileSaved",Dt=36e5,Mt=6e4,Bt=require("node:child_process");class zt{debounce(e,t){return(...r)=>{clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((()=>e.apply(this,r)),t)}}setURL(){e.window.showInputBox({password:!1,placeHolder:"Lifeforge CodeTime: Input Your Lifeforge API host URL"}).then((t=>{t&&this.isURL(t)?(this.state.update("lifeforgeAPIHost",t),this.lifeforgeAPIHost=t,this.getCurrentDuration(!0)):(e.window.showErrorMessage("Please enter a valid URL"),this.statusBar.text="$(clock) Lifeforge CodeTime: Cannot connect to Lifeforge",this.statusBar.tooltip="Enter Lifeforge API host URL",this.statusBar.command="codetime.getURL",this.lifeforgeAPIHost="")}))}constructor(r){this.osName=function(e,r){if(!e&&r)throw new Error("You can't specify a `release` without specifying `platform`");let s;if("darwin"===(e=e||t.platform())){r||"darwin"!==t.platform()||(r=t.release());const e=r?Number(r.split(".")[0])>15?"macOS":"OS X":"macOS";try{if(s=r?function(e){e=Number((e||t.release()).split(".")[0]);const[r,s]=Ct.get(e)||["Unknown",""];return{name:r,version:s}}(r).name:"","Unknown"===s)return e}catch{}return e+(s?" "+s:"")}return"linux"===e?(r||"linux"!==t.platform()||(r=t.release()),s=r?r.replace(/^(\d+\.\d+).*/,"$1"):"","Linux"+(s?" "+s:"")):"win32"===e?(r||"win32"!==t.platform()||(r=t.release()),s=r?function(e){const r=/(\d+\.\d+)(?:\.(\d+))?/.exec(e||t.release());if(e&&!r)throw new Error("`release` argument doesn't match `n.n`");let s=r[1]||"";const n=r[2]||"";if((!e||e===t.release())&&["6.1","6.2","6.3","10.0"].includes(s)){let e;try{e=Tt.sync("wmic",["os","get","Caption"]).stdout||""}catch{e=Tt.sync("powershell",["(Get-CimInstance -ClassName Win32_OperatingSystem).caption"]).stdout||""}const t=(e.match(/2008|2012|2016|2019|2022/)||[])[0];if(t)return`Server ${t}`}return"10.0"===s&&n.startsWith("2")&&(s="10.0.2"),Ot.get(s)}(r):"","Windows"+(s?" "+s:"")):e}(),this.out=e.window.createOutputChannel("Codetime"),this.statusBar=e.window.createStatusBarItem(e.StatusBarAlignment.Left),this.lifeforgeAPIHost="",this.onChangeTextEditorVisibleRanges=this.debounce((e=>{"output"!==e.textEditor.document.uri.scheme&&this.onChange("changeEditorVisibleRanges")}),300),this.platfromVersion=t.release(),this.platfromArch=t.arch(),this.state=r,this.userId=this.getUserId(),this.initSetURL(),this.client=Et.extend({prefixUrl:this.lifeforgeAPIHost,responseType:"json",headers:{"User-Agent":"CodeTime Client"}}),this.session=Ht(),this.init()}getUserId(){return 2}isURL(e){return/^https?:\/\/[^\s/$.?#].\S*$/.test(e)}initSetURL(){const e=this.state.get("lifeforgeAPIHost");this.lifeforgeAPIHost=e||"",""===this.lifeforgeAPIHost&&this.setURL()}init(){this.statusBar.text="$(clock) Lifeforge CodeTime: Initializing...",this.statusBar.show(),this.setupEventListeners(),this.getCurrentDuration(),this.inter=setInterval((()=>{this.getCurrentDuration()}),6e4)}setupEventListeners(){const t=[];e.workspace.onDidChangeTextDocument(this.onEdit,this,t),e.window.onDidChangeActiveTextEditor(this.onEditor,this,t),e.window.onDidChangeTextEditorSelection(this.onChangeTextEditorSelection,this,t),e.window.onDidChangeTextEditorVisibleRanges(this.onChangeTextEditorVisibleRanges,this,t),e.window.onDidChangeWindowState(this.onFocus,this,t),e.workspace.onDidSaveTextDocument(this.onSave,this,t),e.workspace.onDidCreateFiles(this.onCreate,this,t),e.workspace.onDidChangeConfiguration((e=>{e.affectsConfiguration("codetime")&&this.getCurrentDuration()})),this.disposable=e.Disposable.from(...t)}onEdit(e){let t=Ut;"output"!==e.document.uri.scheme&&(1===e.contentChanges.length&&/\r\n|\n|\r/.test(e.contentChanges[0].text)?(t=qt,this.onChange(t)):Math.random()>.9&&this.onChange(t))}onEditor(e){this.onChange("activateFileChanged")}onChangeTextEditorSelection(e){"output"!==e.textEditor.document.uri.scheme&&Math.random()>.9&&this.onChange("changeEditorSelection")}onFocus(e){this.onChange("editorChanged")}onCreate(){this.onChange(Nt)}onSave(e){this.onChange($t)}getOperationType(e="unknown"){switch(e){case Nt:case Ut:case qt:case"fileRemoved":case $t:return"write";default:return"read"}}onChange(t="unknown"){const r=e.window.activeTextEditor,s=e.workspace.name;if(e.workspace.workspaceFolders&&r){const n=r.document;if(n){const r=n.languageId,o=n.fileName;let i=e.workspace.asRelativePath(o);if(i===o&&(i="[other workspace]"),i){const n=Date.now(),a=function(){var t,r;try{const s=null!==(r=null===(t=e.workspace.workspaceFolders)||void 0===t?void 0:t[0])&&void 0!==r?r:null;if(!s)return"";const n=(0,Bt.execSync)("git remote get-url origin",{cwd:s.uri.fsPath}).toString().trim();return n.includes("fatal:")?"":n}catch(e){return console.error("getGitOriginUrl error",e),""}}(),c=function(){var t,r;try{const s=null!==(r=null===(t=e.workspace.workspaceFolders)||void 0===t?void 0:t[0])&&void 0!==r?r:null;if(!s)return"";const n=(0,Bt.execSync)("git rev-parse --abbrev-ref HEAD",{cwd:s.uri.fsPath}).toString().trim();return n.includes("fatal:")?"":n}catch(e){return console.error("getCurrentBranch error",e),""}}(),h={project:s,language:r,relativeFile:i,absoluteFile:o,editor:"VSCode",platform:this.osName,eventTime:n,eventType:t,platformArch:this.platfromArch,plugin:"VSCode",gitOrigin:a,gitBranch:c,operationType:this.getOperationType(t)};this.out.appendLine(JSON.stringify(h)),this.client.post("code-time/eventLog",{json:h}).catch((e=>{this.out.appendLine(`Error: ${e}`)}))}}}}getCurrentDuration(t=!1){const r=e.workspace.getConfiguration("codetime").statusBarInfo;if(""===this.lifeforgeAPIHost)return this.statusBar.text="$(clock) Lifeforge CodeTime: Without Lifeforge API host URL",this.statusBar.tooltip="Enter Lifeforge API host URL",void(this.statusBar.command="codetime.getURL");this.statusBar.command="codetime.toDashboard",this.statusBar.tooltip="Lifeforge CodeTime: Head to the dashboard for statistics";let s=1440;switch(r){case"today":{const e=Intl.DateTimeFormat().resolvedOptions().timeZone,t=new Date((new Date).toLocaleString("en-US",{timeZone:e})),r=t.getHours();s=t.getMinutes(),s+=60*r;break}case"total":default:s=5256e4;break;case"24h":s=1440}this.client.get(`code-time/user/minutes?minutes=${s}`).then((r=>{const{minutes:s}=r.body.data;this.statusBar.text=`$(watch) ${function(e){let t="";if(e>Dt){""!==t&&(t+=" ");const r=Math.floor(e/Dt);t+=`${r}hr`,r>1&&(t+="s"),e%=Dt}if(e>Mt){""!==t&&(t+=" ");const r=Math.floor(e/Mt);t+=`${r}min`,r>1&&(t+="s"),e%=Mt}if(""!==t)return t;const r=Math.floor(e/1e3);return t+=`${r}sec`,r>1&&(t+="s"),t}(60*s*1e3)}`,t&&e.window.showInformationMessage("Lifeforge CodeTime: URL set successfully, please check the status bar")}))}codeTimeInStatBar(){e.window.showQuickPick(["Total code time","24h code time","Today code time"],{}).then((t=>{let r="total";switch(t){case"24h code time":r="24h";break;case"Today code time":r="today"}e.workspace.getConfiguration("codetime").update("statusBarInfo",r,!0).then((()=>this.getCurrentDuration()))}))}getURL(){return this.lifeforgeAPIHost}dispose(){this.statusBar.dispose(),this.disposable.dispose(),clearInterval(this.inter)}}let Gt;function Ft(t){Gt=new zt(t.globalState),e.commands.registerCommand("codetime.getURL",(()=>{Gt.setURL()})),e.commands.registerCommand("codetime.codeTimeInStatusBar",(()=>{Gt.codeTimeInStatBar()})),e.commands.registerCommand("codetime.toDashboard",(()=>{const t=`${Gt.getURL()}/code-time`;e.env.openExternal(e.Uri.parse(t))}))}function Wt(){Gt&&Gt.dispose()}})(),module.exports=s})();
//# sourceMappingURL=extension.js.map